/* list-1.0.5 jdList.js Date:2018-07-19 19:04:44 */
var listDomain="list.jd.com";var interfaceDomain="list.jd.com/pass";var chinaDomain="list-china.jd.com";var marketDomain="list-chaoshi.jd.com";var globalDomain="list.jd.hk";if("undefined"==typeof window.JD&&(window.JD={version:"1.0.0"}),"undefined"==typeof config)var config=window.config={};!function(a){a.mainDomain=pageConfig.FN_getDomain(),a.url={item:"//item.jd.com/",imgBase:"//img30.360buyimg.com/applylogo/"}}(config);var utils=JD.utils={each:function(a,b,c){if(null!=a)if(a.length===+a.length){for(var d=0,e=a.length;e>d;d++)if(b.call(c,a[d],d,a)===!1)return!1}else for(var f in a)if(a.hasOwnProperty(f)&&b.call(c,a[f],f,a)===!1)return!1},makeInstance:function(a){var b=new Function;return b.prototype=a,a=new b,b.prototype=null,a},extend:function(a,b,c){if(b)for(var d in b)c&&a.hasOwnProperty(d)||(a[d]=b[d]);return a},extend2:function(a){var b=arguments;for(var c=1;c<b.length;c++){var d=b[c];for(var e in d)a.hasOwnProperty(e)||(a[e]=d[e])}return a},inherits:function(a,b){var c=a.prototype,d=utils.makeInstance(b.prototype);return utils.extend(d,c,!0),a.prototype=d,d.constructor=a},bind:function(a,b){return function(){return a.apply(b,arguments)}},defer:function(a,b,c){var d;return function(){c&&clearTimeout(d),d=setTimeout(a,b)}},indexOf:function(a,b,c){var d=-1;return c=this.isNumber(c)?c:0,this.each(a,function(a,e){return e>=c&&a===b?(d=e,!1):void 0}),d},removeItem:function(a,b){for(var c=0,d=a.length;d>c;c++)a[c]===b&&(a.splice(c,1),c--)},trim:function(a){return a.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},listToMap:function(a){if(!a)return{};a=utils.isArray(a)?a:a.split(",");for(var c,b=0,d={};c=a[b++];)d[c.toUpperCase()]=d[c]=1;return d},unhtml:function(a,b){return a?a.replace(b||/[&<">'](?:(amp|lt|quot|gt|#39|nbsp);)?/g,function(a,b){return b?a:{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;"}[a]}):""},html:function(a){return a?a.replace(/&((g|l|quo)t|amp|#39);/g,function(a){return{"&lt;":"<","&amp;":"&","&quot;":'"',"&gt;":">","&#39;":"'"}[a]}):""},cssStyleToDomStyle:function(){var a=document.createElement("div").style,b={"float":void 0!=a.cssFloat?"cssFloat":void 0!=a.styleFloat?"styleFloat":"float"};return function(a){return b[a]||(b[a]=a.toLowerCase().replace(/-./g,function(a){return a.charAt(1).toUpperCase()}))}}(),loadFile:function(){var a=[];function b(b,c){try{for(var e,d=0;e=a[d++];)if(e.doc===b&&e.url==(c.src||c.href))return e}catch(f){return null}}return function(c,d,e){var f=b(c,d);if(f)return void(f.ready?e&&e():f.funs.push(e));if(a.push({doc:c,url:d.src||d.href,funs:[e]}),!c.body){var g=[];for(var h in d)"tag"!=h&&g.push(h+'="'+d[h]+'"');return void c.write("<"+d.tag+" "+g.join(" ")+" ></"+d.tag+">")}if(!d.id||!c.getElementById(d.id)){var i=c.createElement(d.tag);delete d.tag;for(var h in d)i.setAttribute(h,d[h]);i.onload=i.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){if(f=b(c,d),f.funs.length>0){f.ready=1;for(var a;a=f.funs.pop();)a()}i.onload=i.onreadystatechange=null}},i.onerror=function(){throw Error("The load "+(d.href||d.src)+" fails,check the url settings of file umeditor.config.js ")},c.getElementsByTagName("head")[0].appendChild(i)}}}(),isEmptyObject:function(a){if(null==a)return!0;if(this.isArray(a)||this.isString(a))return 0===a.length;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},clone:function(a,b){var c;b=b||{};for(var d in a)a.hasOwnProperty(d)&&(c=a[d],"object"==typeof c?(b[d]=utils.isArray(c)?[]:{},utils.clone(a[d],b[d])):b[d]=c);return b},transUnitToPx:function(a){if(!/(pt|cm)/.test(a))return a;var b;switch(a.replace(/([\d.]+)(\w+)/,function(c,d,e){a=d,b=e}),b){case"cm":a=25*parseFloat(a);break;case"pt":a=Math.round(96*parseFloat(a)/72)}return a+(a?"px":"")},timestampformat:function(a){return new Date(a).format("MM-dd hh:mm")},formatTimeStr:function(a){var b=a.substr(0,4)+"-"+a.substr(4,2)+"-"+a.substr(6,2)+" ";return b+=a.substr(8,2)+":"+a.substr(10,2)+":"+a.substr(12,2),new Date(b)}};utils.each(["String","Function","Array","Number","RegExp","Object"],function(a){JD.utils["is"+a]=function(b){return Object.prototype.toString.apply(b)=="[object "+a+"]"}});function Map(){var a=0;var b=new Object;this.put=function(c,d){this.containsKey(c)||a++,b[c]=d},this.get=function(a){return this.containsKey(a)?b[a]:null},this.getByValue=function(a){for(var c in b)if(b[c]==a)return c;return null},this.remove=function(c){this.containsKey(c)&&delete b[c]&&a--},this.containsKey=function(a){return a in b},this.containsValue=function(a){for(var c in b)if(b[c]==a)return!0;return!1},this.values=function(){var a=new Array;for(var c in b)a.push(b[c]);return a},this.keys=function(){var a=new Array;for(var c in b)a.push(c);return a},this.size=function(){return a},this.clear=function(){a=0,b=new Object}}var filtUrl=function(a,b){var c,d;return a||b?(b?(c=a,d=b):(c=window.location.pathname+window.location.search,d=a),c.replace(new RegExp("(^|\\?|&)"+d+"=([^&]*)","gi"),"")):""};var page_jump=function(){var b=$("#page_jump_num").val();if(b){isNaN(b)&&(b=1);var c=filtUrl(baseURL,"page");window.location=window.location.pathname+"?"+c+"&page="+b+"&JL=6_0_0"}};function recombineIds(a){var c,b=[];if(!a)return[];c=a.split("|");for(var d=0;d<c.length;d++){var e=c[d].indexOf(",");0!=c[d].slice(e+1)&&b.push(c[d].slice(0,e))}return b}function cleanSopDatas(a){var b=[];if(!a)return{};for(var c in a)if(a.hasOwnProperty(c))for(var d=0;d<a[c].length;d++)for(var e in a[c][d])if(a[c][d].hasOwnProperty(e)){var f=a[c][d][e];if(void 0==f.dist||""==f.dist||0==f.dist)if(f.dist_ids)if(b=recombineIds(f.dist_ids),b.length){f.ids=b.slice(1).join("|");var g=b[0];a[c][d][g]=$.extend(!0,{},a[c][d][e]),delete a[c][d][e]}else delete a[c][d];else delete a[c][d];else 1==f.dist&&f.dist_ids&&(b=recombineIds(f.dist_ids),f.ids=b.length?b.join("|"):"")}return a}function isPop(a){return a=Number(a),"number"==typeof a?!(a>100001&&9999999>a||a>100000000001&&109999999999>a||a>10000001&&15999999>a||a>110000000001&&119999999999>a||a>16000001&&16999999>a||a>120000000001&&129999999999>a||a>19000001&&19999999>a||a>130000000001&&139999999999>a||a>20000001&&29999999>a||a>140000000001&&149999999999>a):!1}function refreshPage(){var a="//"+window.location.hostname+"/list.html"+window.location.search.replace(/(^|\\?|&)jth=([^&#]*)/g,"").replace(/(^|\\?|&)area=([^&#]*)/g,"");52993!=this.province_ID&&32!=this.province_ID&&53283!=this.province_ID||"list.jd.hk"==location.host||"coll.jd.com"==location.host||"fh.jd.com"==location.host||(a=a.replace(/delivery=1\&/g,"").replace(/delivery_daofu=3\&/g,"").replace(/delivery_211=1\&/g,"").replace(/global=1\&/g,"").replace(/delivery_glb=1\&/g,"")),a=a.replace(/delivery_211=1\&/g,""),a=a.replace(/delivery_jzun=1\&/g,""),(baseConf.areaparam||baseConf.areaparam_djd&&params.isdjd)&&(a=a+"&area="+this.province_ID+","+this.city_ID+","+this.level_3_ID),a=a.replace(/(^|\\?|&)JL=([^&#]*)/g,""),a+="&JL=4_21_0",window.location.href=a}!function(){window.params="undefined"!=typeof params?params:{};function appendIcon2Page(a,b,c){if(-1==b)return void a.append(c);for(var d=b;d>0;d--){if(1==d){if(0==a.find(".icon-group-"+d).length){a.prepend(c);break}a.find(".icon-group-"+d).last().after(c);break}if(a.find(".icon-group-"+d).length>0){a.find(".icon-group-"+d).last().after(c);break}}}var JDList=JD.JDList=function(){var a=this;a.pListItem=[],a.mySKUArray1=[],a.mySKUArray2=[],a.mySKUArray3=[],a.mySKUArray4=[],a.activityInfo=[],a.adPrice=[],a.ggSKUMap=new Map,a.gexinghSKUMap=new Map,a.alg=0,a.$plist=$("#plist"),a.newConf="undefined"!=typeof newConf?newConf:{},a.mySPUMap1=new Map,a.mySPUMap2=new Map,a.slaveWareMap=new Map,a.daogouMap=new Map,a.brandAllFlag=!1,a.pubAllFlag=!1,a.area=[],a.yushouItem=[],a.yushouSubItem=[],a.yushouMap=new Map,a.yushouTimerList=[],a.guanggaoList=[],a.baseConf="undefined"!=typeof baseConf?baseConf:{},a.price_pdos_off=baseConf.price_pdos_off||!1,a.isDjd=params.isdjd||!1,a.gjz=params.gjz||"",a.isLogo=params.isLogo||!1,a.thirdCatId=params.thirdCatId,a.delivery_211=params.delivery_211||0,a.isSpuRepalce=0,a.listaos=!1,a.isloadarea=!1,a.uuid="",a.pin="",a.venderIdsMap=new Map,a.venderAndSkuIdsMap=new Map,a.ebookZhishuMap=new Map,a.ebookShiduMap=new Map,a.ebookAjaxNum=0,a.ebookAjaxCount=4,a.gg_miss=0,a.sortRfidMap={798:"3100",870:"3101",878:"3102",880:"3103",823:"3104",965:"3105",1199:"3106",1300:"3107",1706:"3108",1301:"3109",1707:"3110",877:"3111",1013:"3112"},a.hand2Conf=location.host==listDomain&&"0"!=a.newConf.hand2&&a.baseConf.hand2,a.luoDiPeiSku=[],a.mianYunFeiSku=[],a.popRentItem=[],a.popRentSlaveItem=[],params.abTempFlag=params.abTempFlag||"",a.selectedProvinceName=""};JDList.prototype={init:function(){var a=this;seajs.config({paths:{APP_LIST_YEWUJS_ROOT:"//static.360buyimg.com/devfe/list/1.0.3",PRICE_618:"//misc.360buyimg.com/"}}),this.isPriceFor618=!0,"1"==params.delivery&&"undefined"!=typeof slaveWareList&&(slaveWareList=cleanSopDatas(slaveWareList)),this.getUUID(),this.setAreaIsShow(),this.initMaodian(),this.getCookieArea(),"list.jd.hk"!=document.location.host&&(selectedProvinceId=this.area[0]||1,selectedCityId=this.area[1]||72,selectedAreaId=this.area[2]||4137),this.area.length&&52993==this.area[0]&&"list.jd.hk"!=location.host&&"coll.jd.com"!=location.host&&"fh.jd.com"!=location.host&&((location.href.indexOf("delivery=1")>=0||location.href.indexOf("delivery_daofu=3")>=0)&&(location.href=location.href.replace(/delivery=1\&/g,"").replace(/delivery_daofu=3\&/g,"")),$("#delivery").hide(),$("#delivery_daofu").hide()),this.initSearchReslut(),this.getItemSku(),this.initItemInfo(),"coll.jd.com"!=document.location.host&&"fh.jd.com"!=document.location.host&&"list.jd.hk"!=document.location.host?seajs.use("//static.360buyimg.com/devfe/list/1.0.3/js/expands_new",function(a){new a.Expands}):this.initExpands(),this.initHotsale(),this.loadWLjs(),this.addlsitCK(),this.baseConf.listPV&&this.countPV(),this.initGG(),pageConfig.price_pdos_off=this.price_pdos_off,this.initDaogou(),this.limitDJD(),(location.host==listDomain||location.host==chinaDomain||location.host==marketDomain)&&this.loadArea(a),this.hand2Conf&&seajs.use("//static.360buyimg.com/devfe/list/1.0.3/js/abtest",function(b){var c=Number(a.newConf.hand2);c!=c&&(c=0),0>c&&(c=0),c>1&&(c=1);var d=new b.ABTest(a.uuid,c);version=d.isHitVersion(),a.hand2ABVersion="A"==version})},loadArea:function(a){seajs.use(["jdf/1.0.0/ui/switchable/1.0.0/switchable","jdf/1.0.0/ui/area/1.0.0/area"],function(){$("#J_store_selector").area({scopeLevel:4,hasCommonAreas:1,showAllCommonArea:!0,hasOversea:1,repLevel:0,hasCssLink:0,defaultArea:"1-72-4137-0",onReady:function(b){a.selectedProvinceName=b.provinceName,a.wait()},onChange:function(){refreshPage()}})})},setAreaIsShow:function(){var a=this.baseConf.isloadarea;this.isloadarea=a?!1:!0},wait:function(){var a=this;var b=this.mySKUArray1,c=this.mySKUArray2,d=this.mySKUArray3,e=this.mySKUArray4;if(this.baseConf.guanggaoc&&(this.initAdWords(b),this.initAdWords(c),this.initAdWords(d),this.initAdWords(e)),!params.is_ebook){if(this.baseConf.kucun&&(this.get_stock(b),this.get_stock(c),this.get_stock(d),this.get_stock(e)),this.baseConf.chuxiaobq&&(this.initPromotionTag(b),this.initPromotionTag(c),this.initPromotionTag(d),this.initPromotionTag(e)),this.baseConf.yushou&&this.initYuShouData(),"13765"==params.firstCatId&&a.initPopRentData(),this.baseConf.googletag&&this.initGoogletagmanager(),this.liveShopOnclick(),this.hideEmptyBrandLetter(),this.showGGItem(),"1"==this.newConf.spuHover&&this.baseConf.spu_hover&&this.loadSlaveWare(),"13765"==params.firstCatId&&a.loadPopRentSlave(),"1"==this.newConf.yunfeix_icon&&this.baseConf.yunfeix_icon&&("list.jd.hk"!=location.host&&"fh.jd.com"!=location.host&&"coll.jd.com"!=location.host?32!=selectedProvinceId&&52993!=selectedProvinceId&&53283!=selectedProvinceId&&this.initYunFeiX(this.venderIdsMap.keys()):this.initYunFeiX(this.venderIdsMap.keys())),this.baseConf.youhuiquan){var f=this.venderAndSkuIdsMap.keys();var g=[],h=[],i=[],j=[];f.length<=100?g=f.slice(0,100):f.length>100&&f.length<=200?(g=f.slice(0,100),h=f.slice(100,200)):f.length>200&&f.length<=300?(g=f.slice(0,100),h=f.slice(100,200),i=f.slice(200,300)):f.length>300&&f.length<=400&&(g=f.slice(0,100),h=f.slice(100,200),i=f.slice(200,300),j=f.slice(300,400)),this.inityouhuiq(g),this.inityouhuiq(h),this.inityouhuiq(i),this.inityouhuiq(j)}if(this.hand2Conf&&this.hand2ABVersion&&this.initershou(this.ershouSku),"1"==this.newConf.luodipei&&location.host==listDomain&&this.baseConf.luodipei&&this.getLuoDiPei(this.luoDiPeiSku),"1"==this.newConf.baoyou&&location.host==listDomain&&this.baseConf.baoyou){var a=this;setTimeout(function(){a.getMianYunFei(a.mianYunFeiSku)},300)}}},initMaodian:function(){var a="",b="";if(document.location.host==listDomain){{this.getAttrValue("gui",location.href)}var d=this.getAttrValue2("JL",location.href);d&&(a=d.split("_")[0]),("2"==a||"3"==a)&&(b="#J_crumbsBar"),("4"==a||"5"==a||"6"==a)&&(b="#J_main"),b&&(window.location.hash=b)}},addlsitCK:function(){var a=params.pageNo||"1";if(10>=a){var b=params.listck||"";var c=new Date;c.setTime(c.getTime()+2592e6),document.cookie="listck="+b+";expires="+c.toGMTString()+";path=/;domain="+document.location.host}},getCookieArea:function(){var a=[],b=[];var c=document.cookie.match(/(^| )ipLoc-djd=([^;]*)(;|$)/);c&&c.length>2&&""!=c[2]?(b=c[2].split(/\./),a=b[0].split(/\,|\-/)):a=params.area.split(/\,|\-/),this.area=a},loadWLjs:function(){var a=this;var b="//wl.jd.com/wl.js";"0"==this.gjz&&(b="//wl.jd.com/joya.js",jaq.push(["account","JA2015_111140"]),jaq.push(["domain","jd.hk"])),seajs.use(b,function(){a.baseConf.maidian&&setTimeout(function(){a.setJLSKU(),a.setLogJL()},2e3)})},countPV:function(){var a=window.location.href.replace(/(^|\\?|&)go=([^&#]*)/g,"");var b={md:"9",l:"jdlist",go:"0"};$.ajax({url:a,data:b,cache:!0,dataType:"jsonp",success:function(a){}})},getItemSku:function(){var a=this;this.pListItem=a.$plist.find(".j-sku-item");var b=[],c=[],d=[],e=[],f=[];var g=[],h=[],i=[],j=[];var k="",l="",m="",n="",o="",p="",q="",r="";var s=new Map;this.pListItem.each(function(t){var u=$(this).attr("data-sku");var v=$(this).attr("selfservice");var w=a.isPopRent(u,v);f.push(u),$(this).attr("data-sku_temp",u),$(this).attr("data-active-sku",u),("2"==v||"1"==v)&&a.yushouItem.push(u),w?a.popRentItem.push(u):30>t?g.push(u):t>=30&&60>t?h.push(u):t>=60&&160>t?i.push(u):j.push(u),30>t?b.push(u):t>=30&&60>t?c.push(u):t>=60&&160>t?d.push(u):e.push(u);var x=$(this).attr("venderid")||0;x&&"0"!=x&&(s.put(u,""),a.venderIdsMap.put(x,""));var y="";"undefined"!=typeof attrList&&attrList[u]&&(y=attrList[u].hasOwnProperty("mcat3Id")?attrList[u].mcat3Id.toString():"");var z=$(this).attr("jdzy_shop_id")||0;var A="";if(""!=y&&!w){var B=0,C=0;"undefined"!=typeof attrList&&attrList[u]&&(B=attrList[u].hasOwnProperty("isCanUseDQ")&&1!=attrList[u].isCanUseDQ?1:2,C=attrList[u].hasOwnProperty("isOverseaPurchase")&&0!=attrList[u].isOverseaPurchase?2:1),A=u+"_"+B+"_"+C+","+y+","+x+","+z+";"}10>t?k+=A:t>=10&&20>t?l+=A:t>=20&&30>t?m+=A:t>=30&&40>t?n+=A:t>=40&&50>t?o+=A:t>=50&&60>t?p+=A:t>=60&&70>t?q+=A:r+=A}),a.baseConf.beltEnable&&"undefined"!=typeof attrList&&(""!=k&&this.getProductActivityInfo(k,"gl-item"),""!=l&&this.getProductActivityInfo(l,"gl-item"),""!=m&&this.getProductActivityInfo(m,"gl-item"),""!=n&&this.getProductActivityInfo(n,"gl-item"),""!=o&&this.getProductActivityInfo(o,"gl-item"),""!=p&&this.getProductActivityInfo(p,"gl-item"),""!=q&&this.getProductActivityInfo(q,"gl-item"),""!=r&&this.getProductActivityInfo(r,"gl-item")),this.mySKUArray1=b,this.mySKUArray2=c,this.mySKUArray3=d,this.mySKUArray4=e,this.ershouSku=f,this.initPriceLimit(g),this.initPriceLimit(h),this.initPriceLimit(i),this.initPriceLimit(j),!params.thirdCatId||"798"!=params.thirdCatId&&"870"!=params.thirdCatId&&"878"!=params.thirdCatId&&"880"!=params.thirdCatId||this.newConf.xuangouzs&&"1"==this.newConf.xuangouzs&&this.baseConf.xuangouzs&&(this.initZhiShuNoAjax(b),this.initZhiShuNoAjax(c),this.initZhiShuNoAjax(d),this.initZhiShuNoAjax(e)),this.getComments(b),this.getComments(c),this.getComments(d),this.getComments(e),this.initSpuItem(),"0"!=this.newConf.listaos&&seajs.use("APP_LIST_YEWUJS_ROOT/js/abtest",function(b){var c=Number(a.newConf.listaos);c!=c&&(c=0),0>c&&(c=0),c>1&&(c=1);var d=new b.ABTest(a.uuid,c);version=d.isHitVersion(),"A"==version&&(a.initaosItem(),a.listaos=!0)}),params.istsyx?(this.getEBOOKBySKU_BOOK(b),this.getEBOOKBySKU_BOOK(c),this.getEBOOKBySKU_BOOK(d),this.getEBOOKBySKU_BOOK(e),this.baseConf.dianpu&&s.size()>0&&this.getDianPuInfoBySKU_BOOK(s.keys())):this.baseConf.dianpu&&s.size()>0&&(this.getDianPuInfoBySKU(b),this.getDianPuInfoBySKU(c),this.getDianPuInfoBySKU(d),this.getDianPuInfoBySKU(e)),params.is_ebook&&(0==c.length&&(this.ebookAjaxCount=2),"6"!=params.paragraph_tpl_type&&"7"!=params.paragraph_tpl_type&&(this.getShiduChangduByEBOOK(b),this.getShiduChangduByEBOOK(c),this.getBOOKByEBOOK(b),this.getBOOKByEBOOK(c))),this.bindWLByItem()},bindWLByItem:function(){var a=this;var b=this.pListItem;for(var c=0,d=b.length;d>c;c++){var e=b.eq(c);var f=e.attr("data-sku");var g=e.attr("data-i");g||e.attr("data-i",c+1);var h=e.find(".p-name em").html();var i=e.find(".p-commit a").html();var j=e.find(".p-commit span em").html();var k=a.slaveWareMap.get(f);k?(k.name=h,k.comments=i,k.zhishu=j):a.slaveWareMap.put(f,{name:h,comments:i,zhishu:j})}$("#btn-back").click(function(){var b=document.referrer;var c=baseURL||"";window.location.href=b?b:window.location.pathname+"?cat="+a.getAttrValue("cat",c)}),a.$plist.delegate(".j-sku-item","click",function(a){var b=params.abTestFlag;var c=params.pageNo;var d=params.thirdCatId;var e=location.href;var f=$(this).attr("data-sku");var g=$(this).attr("data-i");var h=$(this).attr("alg")||0;var i=$(a.target);var j=i.parents();void 0==g&&(g=0),j.is(".p-img")?log("search","list",e,d,"5",f,"1",g,c,0,b,h):j.is(".p-name")?log("search","list",e,d,"5",f,"2",g,c,0,b,h):i.is(".addcart")?log("search","list",e,d,"5",f,"4",g,c,0,b,h):i.is(".J_focus")?log("search","list",e,d,"5",f,"5",g,c,0,b,h):i.is(".J_contrast")?log("search","list",e,d,"5",f,"6",g,c,0,b,h):j.is(".ebookbuy")&&log("search","list",e,d,"5",f,"7",g,c,0,b,h),i.is(".comment")&&log("search","list",e,d,"5",f,"3",g,c,0,b,h),i.is(".spu-link")&&log("search","list",e,d,"5",f,"17",g,c,0,b,h)}),$("#hotsale").delegate("dl","click",function(a){var b=params.abTestFlag;var c=params.thirdCatId;var d=location.href;var e=$(a.target);var f=e.parents();var g=$(this).find(".p-price").attr("newsku")||$(this).find(".p-price").attr("sku");var h=$(this).index()+1;f.is(".p-name")?log("search","list",d,c,"8","1",g,"1",h,b):f.is(".btns")?log("search","list",d,c,"8","1",g,"7",h,b):f.is("dt")&&log("search","list",d,c,"8","1",g,"2",h,b)}),$("#market").delegate("li","click",function(a){var b=params.abTestFlag;var c=params.thirdCatId;var d=location.href;var e=$(a.target);e.parents();var g=$(this).find("a");var h=g.attr("href");var i="1";e.is("img")&&(i="2"),log("search","list",d,c,"2",i,h,b)}),$("#b_xstj").delegate("li","click",function(a){var b=params.abTestFlag;var c=params.thirdCatId;var d=location.href;var e=$(a.target);var f=e.parents();f.is(".p-img")?log("search","list",d,c,"13","1","","1","",b):e.is(".p-name")?log("search","list",d,c,"13","1","","1","",b):f.is(".extra")&&log("search","list",d,c,"13","1","","1","",b)}),$("#b_zbhs").delegate("li","click",function(a){var b=params.abTestFlag;var c=params.thirdCatId;var d=location.href;var e=$(a.target);var f=e.parents();f.is(".p-img")?log("search","list",d,c,"13","2","","1","",b):e.is(".p-name")?log("search","list",d,c,"13","2","","1","",b):f.is(".extra")&&log("search","list",d,c,"13","2","","1","",b)})},initHotsale:function(){if(this.isDjd){var b=this.area[0];var c="//d.jd.com/vclist/getvclist.action";var d=this.thirdCatId||"798";var e=this.sortRfidMap[d];var f=$("#hotsale").find("div[class='mc list-h']");var g=f.attr("rfid");if(g=e?e:g,!g)return;var h='[{"size":3,"sizeNation":2,"provinecId":'+b+',"rfid":'+g+',"categoryId":'+d+',"compare":1}]';var i=e?{jsonStr:encodeURIComponent(h),key:b+"-"+g,resource:"new"}:{jsonStr:encodeURIComponent(h),key:b+"-"+g};$.ajax({url:c,data:i,cache:!0,dataType:"jsonp",success:function(a){if(a){var b=[];var c=[];if(a&&a[g]&&a[g].length>=3){var d=0,e=a[g].length>3?3:a[g].length,h=null;for(d=0;e>d;d++){h=a[g][d];var i=h.wid;var j=h.imgurl?h.imgurl:h.prouductUrl;var k="//img1"+i%5+".360buyimg.com/n4/"+j;var l='<dl><dt><a href="//item.jd.com/'+i+'.html" target="_blank"><img height="100" width="100" alt="'+h.title+'"src="'+k+'"></a></dt><dd><div class="p-name"><a href="//item.jd.com/'+i+'.html" target="_blank">'+h.title+'<font color="#ff6600">'+(h.wareTitle?h.wareTitle:"")+'</font></a></div><div class="p-price" newsku="'+i+'"><strong></strong></div><div class="btns"><a href="//cart.jd.com/gate.action?pid='+i+'&pcount=1&ptype=1" target="_blank">\u7acb\u5373\u62a2\u8d2d</a></div></dd></dl>';c.push(i),b.push(l)}if(b.length>0&&c.length>0){if(f.html(b.join("")),!c||c.length<1)return;seajs.use(["product/list/1.0.4/js/tools"],function(a){a.getPrice(c,this.price_pdos_off,function(a){if(a)for(var b=0,c=a.length;c>b;b++)$("#hotsale .p-price[newsku='"+a[b].id.replace("J_","")+"']").find("strong").html(a[b]&&new Number(a[b].p)>0?"\uffe5"+a[b].p:"\u6682\u65e0\u62a5\u4ef7")})})}}}}})}var j=[],k=$("#hotsale .p-price");for(var l=0,m=k.length;m>l;l++)skuId=k.eq(l).attr("sku"),skuId&&j.push(skuId);j.length>0&&seajs.use(["product/list/1.0.4/js/tools"],function(a){a.getPrice(j,this.price_pdos_off,function(a){if(a)for(var b=0,c=a.length;c>b;b++){var d=a[b].id.replace("J_","");var e=a[b].p;$("#hotsale .p-price[sku='"+d+"']").children("strong").html(e>0?"\uffe5"+e:"\u6682\u65e0\u62a5\u4ef7")}})})},initItemInfo:function(){var a=this.pListItem;for(var b=0,c=a.length;c>b;b++){var d=a.eq(b);var e=d.attr("data-sku");var f=d.attr("venderId");var g=d.attr("brand_id");if(!isPop(e)||attrList[e]&&attrList[e].hasOwnProperty("venderType")&&"100"==attrList[e].venderType){if(!params.istsyx&&"list.jd.hk"!=location.host){var i=$(".p-icons",d);var j="";isPop(e)?attrList[e]&&attrList[e].hasOwnProperty("venderType")&&"100"==attrList[e].venderType&&(j="\u8054\u7cfb\u4f9b\u5e94\u5546\u8fdb\u884c\u54a8\u8be2"):j="\u4eac\u4e1c\u81ea\u8425\uff0c\u54c1\u8d28\u4fdd\u969c",appendIcon2Page(i,1,'<i class="icon-group-1 goods-icons J-picon-tips" data-tips="'+j+'">\u81ea\u8425</i>')}}else if(location.host==listDomain&&!params.is_tid&&32!=selectedProvinceId&&52993!=selectedProvinceId&&53283!=selectedProvinceId&&attrList[e]&&attrList[e].cw&&!params.istsyx&&"list.jd.hk"!=location.host){var i=$(".p-icons",d);appendIcon2Page(i,2,'<i class="icon-group-1 goods-icons J-picon-tips"  data-tips="\u4eac\u4e1c\u7269\u6d41\u4ed3\u914d\uff0c\u5546\u5bb6\u63d0\u4f9b\u552e\u540e\u670d\u52a1">\u4eac\u4e1c\u7269\u6d41</i>')}if(params&&1==this.delivery_211&&location.host==listDomain&&!params.is_tid&&this.baseConf.local_icon&&!params.istsyx&&"list.jd.hk"!=location.host){var k=$(".p-icons",d);appendIcon2Page(k,4,'<i class="icon-group-4 goods-icons J-picon-tips" data-tips="\u4ece\u60a8\u6240\u5728\u57ce\u5e02\u7684\u4eac\u4e1c\u4ed3\u5e93\u53d1\u8d27\uff0c\u5f53\u65e5\u4e0a\u534811:00\u524d\u63d0\u4ea4\u7684\u73b0\u8d27\u8ba2\u5355\uff0c\u5f53\u65e5\u9001\u8fbe\uff1b\u5f53\u65e523:00\u524d\u63d0\u4ea4\u7684\u73b0\u8d27\u8ba2\u5355\uff0c\u6b21\u65e515:00\u524d\u9001\u8fbe">\u672c\u5730\u4ed3</i>')}if("undefined"!=typeof attrList&&"list.jd.com"==document.location.host&&void 0!=attrList[e]&&attrList[e].isJP&&1==attrList[e].isJP){var l=$(".p-icons",d);var m='<i class="icon-group-1 goods-icons3 J-picon-tips" data-tips="\u5546\u54c1\u5f53\u524d\u4ef7\u683c\u5df2\u4e0e11.11\u5f53\u5929\u4e00\u81f4\uff0c\u4e70\u8d35\u8fd4\u8fd8\u5dee\u989d" style="background: #4b9bfa;">\u4ef7\u4fdd11.11</i>';appendIcon2Page(l,4,m)}if(params&&attrList[e]&&attrList[e].hasOwnProperty("factoryShip")&&attrList[e].hasOwnProperty("isJDexpress")){var n=0==attrList[e].isJDexpress&&1==attrList[e].factoryShip;if(n){var i=$(".p-icons",d);var o="\u5382\u5bb6\u6216\u4f9b\u5e94\u5546\u53d1\u8d27\u548c\u914d\u9001";var p="\u5382\u5546\u914d\u9001";appendIcon2Page(i,3,'<i class="icon-group-1 goods-icons J-picon-tips" data-tips="'+o+'">'+p+"</i>")}}if(params&&params.show_jzun&&attrList[e]&&attrList[e].hasOwnProperty("SendService")){var i=$(".p-icons",d);appendIcon2Page(i,3,'<i class="icon-group-1 goods-icons J-picon-tips" data-tips="\u4e13\u4eba\u914d\u9001\uff0c\u5c0a\u8d35\u4f53\u9a8c">\u4eac\u5c0a\u8fbe</i>')}if(void 0!=baseConf&&baseConf.ziqu_icon&&"undefined"!=typeof attrList&&"list.jd.com"==document.location.host&&attrList[e]&&4==attrList[e].tssp){var l=$(".p-icons",d);var q='<i class="icon-group-1 goods-icons3 J-picon-tips" data-tips="\u8be5\u5546\u54c1\u652f\u6301\u5230\u5e97\u81ea\u53d6">\u5230\u5e97\u81ea\u53d6</i>';appendIcon2Page(l,4,q)}if("undefined"!=typeof attrList&&document.location.host==listDomain){var r=attrList[e];if("undefined"!=typeof r){var l=$(".p-icons",d);var s=$(".p-name>a",d);var t=r.isZgtk&&1===r.isZgtk;var u=r.isFzxp&&1===r.isFzxp;var v='<i class="icon-group-5 goods-icons3 J-picon-tips" data-tips="\u8be5\u5546\u54c1\u662f\u5546\u573a\u540c\u6b3e">\u5546\u573a\u540c\u6b3e</i>';var w='<i class="icon-group-6 goods-icons3 J-picon-tips" data-tips="\u8be5\u5546\u54c1\u662f\u5f53\u5b63\u65b0\u54c1">\u65b0\u54c1</i>';var x="1"===params.mallpro;var y="1"===params.newpro;x?t&&appendIcon2Page(l,5,v):y?u&&appendIcon2Page(l,6,w):(t&&appendIcon2Page(l,5,v),u&&!t&&appendIcon2Page(l,6,w))}}if("undefined"!=typeof attrList&&document.location.host==listDomain){var r=attrList[e];if("undefined"!=typeof r){var z=$(".p-icons",d);var A=r.isFlashPurchase;var B='<i class="icon-group-9 goods-icons4 J-picon-tips" data-tips="\u54c1\u724c\u9650\u65f6\u7279\u5356">\u95ea\u8d2d</i>';A&&2===A&&appendIcon2Page(z,9,B)}}var r,C;if("undefined"!=typeof attrList&&(r=attrList[e],"undefined"!=typeof r&&(C=r.IsSam)),C&&d.attr("data-samgoods",C),"undefined"!=typeof attrList&&"list.jd.hk"!=document.location.host&&"undefined"!=typeof r){var D=r.LowestBuy;var E=r.soldOS||0;var F=r.UnitNum||!1;var G=3==r.isTimeOrder||0;var H=r.isJX||!1;var I=r.ysp;D&&d.attr("data-lowestbuy",D),E&&d.attr("data-soldoversea",E),F&&d.attr("data-unitnum",F);var J=r.mcat3Id?r.mcat3Id:params.thirdCatId;var K=$(".goods-icons-s6",d);0==K.length&&this.venderAndSkuIdsMap.put(e+"_"+f+"_"+J,"");var l=$(".p-icons",d);var s=$(".p-name>a",d);if(s.find(".p-tag2").hide(),1==H){var L='<img src="//img14.360buyimg.com/uba/jfs/t3049/82/4914447858/3930/b079959c/585a24f7Na7e5de1e.png" width="57" height="16" class="js-jdjx p-tag3" data-tips="\u4eac\u4e1c\u7cbe\u9009">';s.find("em").prepend(L)}else if(1==I||3==I)s.find("em").prepend('<span class="p-tag" style="background-color:#282828;">\u827a\u672f\u54c1</span>');else if(1==s.find(".p-tag2").length)s.find(".p-tag2").show();else if(attrList[e]&&attrList[e].hasOwnProperty("IsJDMarket")&&1==attrList[e].IsJDMarket){var n="list.jd.hk"!=document.location.host;n&&0==s.find(".p-tag3").length&&0==s.find(".p-tag2").length&&s.find("em").prepend('<span class="p-tag" style="background-color:#c81623;">\u4eac\u4e1c\u8d85\u5e02</span>')}else if(attrList[e]&&attrList[e].hasOwnProperty("jzfp")&&1==attrList[e].jzfp)s.find("em").prepend('<span class="p-tag" style="background-color:#e23a3a;">\u6276\u8d2b\u7279\u4ea7</span>');else if(299330==g)(!isPop(e)||attrList[e]&&attrList[e].hasOwnProperty("venderType")&&"100"==attrList[e].venderType)&&s.find("em").prepend('<span class="p-tag" style="background-color:#c81623;">\u4eac\u9020</span>');else if("coll.jd.com"!=location.host&&"fh.jd.com"!=location.host&&"list.jd.hk"!=location.host&&this.baseConf.shouquanqiu){var M=$(".p-name",d);if(7>=E&&E>=1&&(M.find(".p-tag2").hide(),!M.find(".js-jdjx").length)){var N='<img src="//img11.360buyimg.com/devfe/jfs/t5302/7/2574373166/601/91234bb7/591bfd12N9b41b505.png" width="40" height="16" class="p-tag3" data-tips="\u552e\u5168\u7403">';M.find("em").prepend(N)}}G&&"fh.jd.com"!=document.location.host&&"coll.jd.com"!=document.location.host&&"list.jd.hk"!=document.location.host&&appendIcon2Page(l,7,'<i class="icon-group-7 goods-icons J-picon-tips" data-tips="\u5b9a\u671f\u514d\u8fd0\u8d39\uff0c\u7701\u5fc3\u53c8\u4f18\u60e0" style="background:#fe901d;">\u5b9a\u671f</i>'),("list.jd.com"==document.location.host||"list-chaoshi.jd.com"==document.location.host)&&1!=H&&r.tssp&&2==r.tssp&&appendIcon2Page(l,8,'<i class="icon-group-8 goods-icons J-picon-tips" data-tips="\u54c1\u8d28\u4f18\u9009\uff0c\u53ea\u4e3a\u54c1\u8d28\u751f\u6d3b" style="background:#aa09ed;">\u54c1\u8d28\u4f18\u9009</i>'),("list.jd.com"==document.location.host||"list-chaoshi.jd.com"==document.location.host)&&r.freshTag&&appendIcon2Page(l,8,'<i class="icon-group-8 goods-icons J-picon-tips" data-tips="'+r.freshTag+'" style="background:#26cb15;">'+r.freshTag+"</i>"),("list.jd.com"==document.location.host||"list-chaoshi.jd.com"==document.location.host)&&2==r.isSeptax&&3==r.isOverseaPurchase&&appendIcon2Page(l,10,'<i class="icon-group-10 goods-icons4 J-picon-tips" data-tips="\u672c\u5546\u54c1\u5df2\u5305\u7a0e">\u5305\u7a0e</i>')}if("undefined"!=typeof attrList&&"list.jd.hk"==document.location.host){var r=attrList[e];if("undefined"!=typeof r){var E=r.soldOS||0;if(d.attr("data-soldoversea",E),1==E){var l=$(".p-icons",d);var O="";O=params.icon_up?'<i class="goods-icons2" title="\u8be5\u5546\u54c1\u652f\u6301\u552e\u5f80\u6e2f\u6fb3\u5730\u533a">\u6e2f\u6fb3</i>':'<i class="goods-icons2 J-picon-tips" data-tips="<div class=&quot;picon-tips&quot;><i class=&quot;goods-icons2&quot;>\u6e2f\u6fb3</i><em>\u8be5\u5546\u54c1\u652f\u6301\u552e\u5f80\u6e2f\u6fb3\u5730\u533a</em></div>">\u6e2f\u6fb3</i>',l.append(O)}}}location.host==listDomain&&(attrList[e]&&attrList[e].svcTplId&&this.luoDiPeiSku.push(e+","+f+","+attrList[e].svcTplId),attrList[e]&&attrList[e].shipFareTmplId&&(attrList[e].svcTplId=attrList[e].svcTplId||0,this.mianYunFeiSku.push(e+","+f+","+attrList[e].svcTplId+","+attrList[e].shipFareTmplId)))}},initYunFeiX:function(a){var b=this;if(a&&!(a.length<1)){var c="//baozhang.jd.com/service/getAllInsure";var d={my:"list_yfx",venderIds:a.join("-")};$.ajax({url:c,data:d,cache:!0,dataType:"jsonp",success:function(a){if(a){var c=new Map;for(f=0;f<a.length;f++){var d=a[f].venderId;d&&c.put(d,a[f])}var e=b.pListItem;for(var f=0,g=e.length;g>f;f++){var h=e.eq(f);var i=h.attr("venderid");var j=c.get(i);if(j){var k=[];if(1==j.yFX&&k.push(params.icon_up?'<i class="goods-icons2" title="\u8fd0\u8d39\u9669">\u9669</i>':"list.jd.hk"==location.host?'<i class="goods-icons2" title="\u8fd0\u8d39\u9669">\u9669</i>':'<i class="icon-group-17 goods-icons2 J-picon-tips" data-tips="\u8fd0\u8d39\u9669">\u9669</i>'),k.length>0)if("list.jd.hk"==location.host){var l=$(".J-pro-icons",h);var m=k.join("");l.append(m)}else{var n=$(".p-icons",h);var m=k.join("");appendIcon2Page(n,17,m)}}}}}})}},initershou:function(a){var b=this,c="//used-api.jd.com/productRelation/getSpuAndSku",d={};if(a&&!(a.length<1))for(;a.length;){var e=a.splice(0,20);d={skuIds:e.join(",")},$.ajax({url:c,data:d,cache:!0,dataType:"jsonp",success:function(a){var c="",d="",e=new Map;if(200==a.code&&a.list.length){for(var f=0;f<a.list.length;f++){var g=a.list[f].sku;g&&e.put(g,a.list[f])}var h=b.pListItem;for(var f=0,i=h.length;i>f;f++){var j="";var k=h.eq(f);var l=k.attr("data-sku");var m=e.get(l);var n=$(".p-commit",k);if(m&&"object"==(typeof m).toLowerCase()){var o=!!m.skuNum;var p=!!m.spu;var d=!!m.sku;o&&!p&&d&&(j="//paipai.jd.com/pc/list.html?pid="+m.sku),p&&!o&&(j="//spu.jd.com/used.html?stock=1&pid="+m.spu),o&&p&&(j="//spu.jd.com/used.html?stock=1&pid="+m.spu),j&&(c='<a class="spu-link" target="_blank" href="'+j+'">\u4e8c\u624b\u6709\u552e</a>',n.find(".spu-link").length||n.prepend(c))}}}}})}},inityouhuiq:function(a){var b=this;if(a&&!(a.length<1)){var c="//guide.jd.com/kelingSearch?";var d={my:"list_youhuiq",pin:b.pin,skuInfoes:a.join(",")};$.ajax({url:c,data:d,cache:!0,dataType:"jsonp",success:function(a){if(a){var c=a.batches;var d=new Map;for(h=0;h<c.length;h++){var e=c[h].sku;var f=c[h].batches;
e&&f&&d.put(e,f)}var g=b.pListItem;for(var h=0,i=g.length;i>h;h++){var j=g.eq(h);var e=j.attr("data-sku");var k=d.get(e);if(k){var l=[];if(l.push(params.icon_up?'<i class="goods-icons" title="\u4f18\u60e0\u5238">\u5238</i>':"list.jd.hk"==location.host?'<i class="goods-icons" title="\u4f18\u60e0\u5238">\u5238</i>':'<i class="icon-group-15 goods-icons4 J-picon-tips" data-tips="\u4f18\u60e0\u5238">\u5238</i>'),l.length>0)if("list.jd.hk"==location.host){var m=$(".J-pro-icons",j),n=l.join(""),o=m.find(".goods-icons-img"),p=m.find(".unit-price");o.length?o.last().after(n):m.find(".js-local-store").length&&!o.length?m.find(".js-local-store").last().after(n):m.find("#js-jdps").length&&!o.length?m.find("#js-jdps").last().after(n):m.find("#js-jdzy").length&&!o.length?m.find("#js-jdzy").last().after(n):p.length&&!o.length?p.after(n):m.prepend(n)}else{var m=$(".p-icons",j),n=l.join("");appendIcon2Page(m,15,n)}}}}}})}},getDianPuInfoBySKU:function(a){var b=this;if($(".p-shop").removeClass("hide"),a.length>0){var c=b.collectVenderIdBySKU(a);$.ajax({url:"//chat1.jd.com/api/checkChat?my=list&pidList="+a.join(","),dataType:"jsonp",success:function(a){if(!a&&!a.length)return!1;var d=new Map;for(var e=0;e<a.length;e++){var f=a[e];var g=f.pid;d.put(g,f)}var h=b.pListItem;for(var e=0,i=h.length;i>e;e++){var j=h.eq(e);var k=j.attr("venderid");var l=j.attr("jdzy_shop_id");var g=j.attr("data-sku");var m=$(".p-shop",j);if(k&&"0"!=l){var n=d.get(g);if(n){var o="";g>=1e9&&2e9>=g||g>=10000000001&&99999999999>=g||"0"==l||(o='<img src="//img14.360buyimg.com/uba/jfs/t3139/175/3796130719/1386/3a9cc545/57f8ac4fN87e531d5.png" alt="" width="44" height="16" class="goods-icons-img J-picon-tips" data-tips="\u4eac\u4e1c\u81ea\u8425\uff0c\u54c1\u8d28\u4fdd\u969c">');var p=m.attr("data-shop_name");p||(p=n.seller||""),l&&"0"!=l||(l=n.shopId);var q="";if("0"!=l){var r=p;r.length>9?r=r.substr(0,9)+"...":r+="  ",q='<a href="//mall.jd.com/index-'+l+'.html" target="_blank" title="'+p+'">'+r+"</a>"}else q="","b"==params.abTempFlag.toLowerCase()&&(q="\u4eac\u4e1c\u81ea\u8425");var s="",t="im-01",u="\u8054\u7cfb\u7b2c\u4e09\u65b9\u5356\u5bb6\u8fdb\u884c\u54a8\u8be2";var v=n.code;"2"==v?(t="im-offline",u="\u672a\u5f00\u901aIM"):"3"==v&&(t="im-offline",u="\u7b2c\u4e09\u65b9\u5356\u5bb6\u5ba2\u670d\u4e0d\u5728\u7ebf\uff0c\u53ef\u7559\u8a00"),""!=o&&(t="im-02",u="\u8054\u7cfb\u4f9b\u5e94\u5546\u8fdb\u884c\u54a8\u8be2","3"==v&&(t="im-offline",u="\u4f9b\u5e94\u5546\u5ba2\u670d\u4e0d\u5728\u7ebf\uff0c\u53ef\u7559\u8a00")),"0"!=v&&p&&(s='<em class="'+t+'" title="'+u+'" data-shopid="'+l+'" venderid="'+k+'"></em>');var w="<span >"+s+"</span>";m.empty(),m.append(w)}}else 0==k&&"0"==l&&"b"==params.abTempFlag.toLowerCase()&&(m.empty(),m.append("<span >\u4eac\u4e1c\u81ea\u8425</span>"))}b.setShopName(c)}})}},collectVenderIdBySKU:function(a){var c=[];var d=new Map;return c=c.concat(a),$.each(c,function(a,b){var c=$('div[data-sku="'+b+'"]',this.$plist);var e=c.attr("venderid");c.length>0&&e>0&&d.put(e,c.attr("jdzy_shop_id"))}),d},setShopName:function(a){var b=this;var c=10;if(!(a instanceof Map))throw"DATA TYPE ERROR.";var d=a.keys();if(!$.isArray(d))throw"DATA TYPE ERROR.";if(d.length>0){var e=Math.ceil(d.length/c);for(var f=0;e>f;f++){var g=d.slice(f*c,f*c+c);$.ajax({url:"//rms.shop.jd.com/json/pop/shopInfo.action?ids="+g.join(","),dataType:"jsonp",success:function(c){if($.isArray(c)&&c.length>0)for(var d=0,e=c.length;e>d;d+=1){var f=c[d].venderId;var g=a.get(f);var h=c[d].name.length>0?c[d].name:"";var i=h.length>9?h.substr(0,9)+"...":h;var j=$('div[venderid="'+f+'"]',b.$plist);var k='<a href="//mall.jd.com/index-'+(g?g:f)+'.html"                                                             target="_blank" title="'+h+'">'+i+"</a>";j.each(function(){var a=$(this);var b=$(".p-shop",a);var c=$(".p-shopnum",a);var d=$("span",b);var e=$("a",d);b.length>0&&(e.length>0?e.attr("title",h).html(h):d.length>0?d.prepend(k):b.html("<span>"+k+"</span>")),c.length>0&&c.html($(k).addClass("curr-shop"))})}}})}}},getMianYunFei:function(a){var b=this;if(a.length)for(;a.length;){var c=a.splice(0,60);$.ajax({url:"//c.3.cn/delivery/freeMark",dataType:"jsonp",data:{skuIds:c.join(";"),area:this.area.join("_")},success:function(a){var c=b.pListItem;var d=new Map;for(var e=0;e<a.length;e++){var f=a[e];var g=f.skuId;d.put(g,f)}for(var e=0,h=c.length;h>e;e++){var i=c.eq(e);{i.attr("venderid")}var g=i.attr("data-sku");var k=d.get(g);if(k&&3==k.freeMark)if("list.jd.hk"==location.host){var l=$(".J-pro-icons",i),m=l.find(".goods-icons-img"),n=l.find(".unit-price");var o='<i class="icons J-picon-tips" data-tips="<div class=&quot;picon-tips&quot;><i class=&quot;goods-icons&quot;>\u5546\u5bb6\u514d\u90ae</i></div><em>\u5f53\u524d\u6536\u8d27\u5730\u5740\uff0c\u8be5\u5546\u54c1\u514d\u90ae\u8d39</em>">\u5546\u5bb6\u514d\u90ae</i>';m.length?m.last().after(o):l.find(".js-local-store").length&&!m.length?l.find(".js-local-store").last().after(o):l.find("#js-jdps").length&&!m.length?l.find("#js-jdps").last().after(o):l.find("#js-jdzy").length&&!m.length?l.find("#js-jdzy").last().after(o):n.length&&!m.length?n.after(o):l.prepend(o)}else{var l=$(".p-icons",i);var o='<i class="icon-group-16 goods-icons4 J-picon-tips" data-tips="\u5f53\u524d\u6536\u8d27\u5730\u5740\uff0c\u8be5\u5546\u54c1\u514d\u90ae\u8d39">\u514d\u90ae</i>';appendIcon2Page(l,16,o)}}}})}},getLuoDiPei:function(a){var b=this;if(a.length)for(;a.length;){var c=a.splice(0,60);$.ajax({url:"//c.3.cn/delivery/freeMark",dataType:"jsonp",data:{skuIds:c.join(";"),area:this.area.join("_")},success:function(a){var c=b.pListItem;var d=new Map;for(var e=0;e<a.length;e++){var f=a[e];var g=f.skuId;d.put(g,f)}for(var e=0,h=c.length;h>e;e++){var i=c.eq(e);{i.attr("venderid")}var g=i.attr("data-sku");var k=d.get(g);if(k){var l=$(".p-img a",i);1==k.freeMark?l.prepend('<img src="//img13.360buyimg.com/uba/jfs/t5839/282/7922709602/3283/f36a34e8/597562d1Nfdb86802.png" alt="\u514d\u8d39\u9001\u88c5" class="p-service-mask" width="40" height="40">'):2==k.freeMark&&l.prepend('<img src="//img12.360buyimg.com/uba/jfs/t5974/39/6694579944/2615/71b10110/597562d3N3a4ff977.png" alt="\u9001\u8d27\u4e0a\u95e8" class="p-service-mask" width="40" height="40">')}}}})}},getDianPuInfoBySKU_BOOK:function(a){var b=this;if(a.length>0){var c=b.collectVenderIdBySKU(a);var d=b.pListItem;for(var e=0,f=d.length;f>e;e++){var g=d.eq(e);{g.attr("venderid")}{g.attr("jdzy_shop_id")}var j=g.attr("data-sku");var k=$(".p-icons",g);isPop(j)||appendIcon2Page(k,1,'<i class="icon-group-1 goods-icons J-picon-tips" data-tips="\u4eac\u4e1c\u81ea\u8425\uff0c\u54c1\u8d28\u4fdd\u969c">\u81ea\u8425</i>')}b.setShopName(c)}},initPriceLimit_ebook:function(a){var b=this;!a||a.length<1||seajs.use(["product/list/1.0.4/js/tools"],function(c){c.getPrice(a,this.price_pdos_off,function(a){if(a){var c=new Map;for(f=0;f<a.length;f++){if(!a[f].id)return!1;var d=a[f].id.replace("J_","");c.put(d,a[f])}var e=b.pListItem;for(var f=0,g=e.length;g>f;f++){var h=e.eq(f);var i=h.attr("data-sku-e");var j=c.get(i);if(j){var k=j.p;{j.m}var m="";m=k>0?"\xa5"+k:"\u6682\u65e0\u62a5\u4ef7";var n=$(".J_price_ebook",h);n.html(m)}}}})})},getDianPuInfo:function(a){var b=this;a.length>0&&$.ajax({url:"//chat1.jd.com/api/checkChat?venderList="+a.join(","),dataType:"jsonp",success:function(a){if(!a&&!a.length)return!1;var c=new Map;for(var d=0;d<a.length;d++){var e=a[d];var f=e.venderId;c.put(f,e)}var g=b.pListItem;for(var d=0,h=g.length;h>d;d++){var i=g.eq(d);var f=i.attr("venderid");if(f){var j=c.get(f);if(j){var k="online",l="\u8054\u7cfb\u5ba2\u670d";"2"==j.code?(k="offline",l="\u672a\u5f00\u901aIM"):"3"==j.code&&(k="offline",l="\u5ba2\u670d\u7559\u8a00");var m="";var n=i.attr("jdzy_shop_id");var o=i.attr("data-sku");10!=o.length&&"0"!=n&&(m='<em class="u-jd">\u4eac\u4e1c\u81ea\u8425</em>');var p='<span><a href="//mall.jd.com/index-'+j.shopId+'.html" target="_blank" title="'+j.seller+'">'+j.seller+"</a>"+m+'<i class="'+k+'" title="'+l+'" data-shopid="'+j.shopId+'" venderid="'+j.venderId+'"></i></span>';var q=$(".p-shop",i);q.append(p)}}}}})},liveShopOnclick:function(){this.$plist.delegate("div.p-shop span em[data-shopid]","click",function(){var b=$(this).attr("data-shopid");if(b){var c=$(this).parent().parent().parent().attr("data-sku")||$(this).parent().parent().parent().parent().attr("data-sku")||"0";if("0"==c)return;var d={pid:c,stock:encodeURIComponent($("#store-selector").find(".text").text()+"("+$(this).parent().parent().siblings(".p-stock").html()+")")||"",score:5,commentNum:$(this).parent().parent().siblings(".p-commit").find("a").html()||"",advertiseWord:encodeURIComponent($(this).parent().parent().siblings(".p-name").find("i.promo-words").html())||"",verderId:$(this).attr("venderid"),entry:"jd_list",area:encodeURIComponent($("#store-selector .text").text())||""};window.open("//chat.jd.com/index.action?"+$.param(d),c)}})},initPriceLimit:function(a){var b=this;!a||a.length<1||seajs.use(["//misc.360buyimg.com/product/module/tools"],function(c){c.getPrice(a,this.price_pdos_off,function(a){var c=[];if(a){for(h=0;h<a.length;h++){if(!a[h].id)return!1;var d=a[h].id.replace("J_","");(a[h].p<0||void 0==a[h].p||""==a[h].p)&&c.push(d),b.adPrice.push(a[h]);var e=b.slaveWareMap.get(d);e?(e.p=a[h].p,e.m=a[h].m,e.sp=a[h].sp||null,e.pp=a[h].pp||null,e.tpp=a[h].tpp||null,e.np=a[h].np||{},e.up=a[h].up||"",e.tkp=a[h].tkp||0):b.slaveWareMap.put(d,a[h])}if(c.length&&b.baseConf.no_price){c=c.join(",");var f=document.createElement("img");f.src="//"+interfaceDomain+"/lapi/price?skuids="+c}var g=b.pListItem;for(var h=0,i=g.length;i>h;h++){var j=g.eq(h);var k=j.attr("data-sku");var l=j.attr("data-samgoods");var m=j.attr("data-unitnum");var n=j.attr("selfservice");var o=b.slaveWareMap.get(k);if(o){var p=o.p;var q=o.m;var r=o.sp||0;var s=o.pp||0;var t=o.tpp||0;{o.np}var v=o.tkp||0;var w=o.up?o.up.split(",")[0].toLowerCase():"";var x="";var y="";var z="";var A=$(".J_price",j);var B=$(".p-img",j);if(p>0){if(1==b.newConf.unit_price&&m){var C=$(".p-icons",j);var D=C.attr("data-unitnum");var E;D||(E=p/m,B.find("a").prepend('<span class="p-unit-price"><em>\xa5'+E.toFixed(2)+"/"+b.newConf.unit_name+"</em></span>"),C.attr("data-unitnum",1))}x="<em>\xa5</em><i>"+p+"</i>"}else x="0.00"==p?"\u514d\u8d39":"<i>\u6682\u65e0\u62a5\u4ef7</i>";if(l&&"sp"==w&&r>0&&(y='<span class="price-sams-1"><em>\xa5'+r+"</em><i></i></span>",A.after(y)),!b.baseConf.plus_price||0==params.gjz||"pp"!=w&&"tpp"!=w||(s>0?A.attr("data-price-plus")||(y='<span class="price-plus-1" title="PLUS\u4f1a\u5458\u4e13\u4eab\u4ef7"><em>\xa5'+s+"</em><i></i></span>",A.after(y).attr("data-price-plus",1)):!s&&t>0&&(A.attr("data-price-plus")||(y='<span class="price-plus-1" title="PLUS\u4f1a\u5458\u4e13\u4eab\u4ef7"><em>\xa5'+t+"</em><i></i></span>",A.after(y).attr("data-price-plus",1)))),"tkp"==w&&v>0&&(z='<span class="price-zsj"><em>\xa5'+v+"</em><i></i></span>",A.after(z)),params.istsyx&&"6929"!=params.secondCatId&&"4855"!=params.secondCatId){var F=Math.ceil(100*parseFloat(p/q).toFixed(15));var G=parseFloat(F/10);.1>G&&(G=.1);var H=$(".p-market",j);H.html("<del>\uffe5"+q+'</del><em class="p-discount">'+G+"\u6298</em>")}if((/^5272,10941/.test(params.cat)||/^5272,14155/.test(params.cat))&&(x="<em>\xa5 </em><span>0.05/\u5343\u5b57</span>"),b.isPopRent(k,n))continue;if(2==n){j.find(".js_ys").html(x);continue}A.html(x)}}}},{ext:11e6,pin:decodeURIComponent(b.pin)})})},initPrice:function(a){var b=this;if(a&&!(a.length<1)){var c="//p.3.cn/prices/mgets?";var d=this.area.join("_");var e={my:"list_price",type:"1",area:d,source:"list_pc_front",skuIds:"J_"+a.join(",J_")};$.ajax({url:c,data:e,cache:!0,dataType:"jsonp",success:function(a){if(a){var c=new Map;for(f=0;f<a.length;f++){if(!a[f].id)return!1;var d=a[f].id.replace("J_","");c.put(d,a[f])}var e=b.pListItem;for(var f=0,g=e.length;g>f;f++){var h=e.eq(f);var i=h.attr("data-sku");var j=c.get(i);if(j){var k=j.p;var l=j.m;{j.sp||0}var n="";n=k>0?"<em>\xa5</em><i>"+k+"</i>":"<i>\u6682\u65e0\u62a5\u4ef7</i>";var o=$(".J_price",h);if(o.html(n),params.istsyx&&"6929"!=params.secondCatId&&"4855"!=params.secondCatId){var p=Math.ceil(100*parseFloat(k/l).toFixed(15));var q=parseFloat(p/10);.1>q&&(q=.1);var r=$(".p-market",h);r.html("<del>\uffe5"+l+'</del><em class="p-discount">'+q+"\u6298</em>")}}}}}})}},isPopRent:function(a,b){var c="object"==typeof attrList[a]?attrList[a].LeaseType:"";return"3"==c&&"13765"==params.firstCatId&&"1"!=b&&"2"!=b?!0:!1},initPopRentData:function(a,b){var c=this;var d=c.popRentItem;a&&(d=a),b||(b=!1);var e=[],f=[],g=[],h=[],i=[];if(d&&!(d.length<1)){for(var j=0,k=d.length;k>j;j++){var l=d[j];49>j?e.push(l):j>=49&&98>j?f.push(l):j>=98&&147>j?g.push(l):j>=147&&196>j?h.push(l):i.push(l)}this.initPricePopRent(e,b),this.initPricePopRent(f,b),this.initPricePopRent(g,b),this.initPricePopRent(h,b),this.initPricePopRent(i,b)}},initPricePopRent:function(a,b){var c=this;var d="//zuzuapi.jd.com/pcClient/pop/goods/fetchAttr";!a||a.length<1||$.ajax({url:d,data:{skuIds:a.join(",")},cache:!0,dataType:"jsonp",success:function(a){0===Number(a.code)&&a.data.length>0&&c.popRentCalllback(a.data,b)}})},popRentCalllback:function(a,b){var c=this;b||(b=!1);for(var d=0,e=a.length;e>d;d++){var f=a[d].skuId;var g=a[d].unitRent;var h=$("#plist .j-sku-item[data-sku="+f+"]");var i=Number(g)>0?"<em>\xa5</em><i>"+Number(g).toFixed(2)+"</i><em>/\u5929</em>":"\u6682\u65e0\u62a5\u4ef7";b||h.find(".p-price").find("strong").html(i);var j=c.slaveWareMap.get(f);j?j.p=i:c.slaveWareMap.put(f,{p:i})}},loadPopRentSlave:function(){var a=this;var b=a.popRentSlaveItem;!b||b.length<1||a.initPopRentData(b,!0)},initZhiShuNoAjax:function(a){if(a.length){var c=$("#plist .gl-warp");for(var d=0;d<a.length;d++){var e=a[d];var f=attrList[e]||{};var g=f.xgzs;if(g){var h=c.find("div[data-sku='"+e+"']");var i="";i='<span class="buy-score" title="\u4eac\u4e1c\u4e0e\u7b2c\u4e09\u65b9\u5408\u4f5c\u5bf9\u5546\u54c1\u6027\u80fd\u3001\u5b89\u5168\u6027\u3001\u5916\u89c2\u7b49\u8fdb\u884c\u7efc\u5408\u8bc4\u4f30\u5f97\u51fa\u9009\u8d2d\u6307\u6570">\u9009\u8d2d\u6307\u6570<em>'+g+"</em></span>";var j=$(".p-commit",h);j.prepend(i)}}}},initZhiShu:function(a){var b=this;if(a&&!(a.length<1)){var c="//c.3.cn/product/tag?";{this.area.join("_")}var e={my:"list_zhishu",skuIds:a.join(",")};$.ajax({url:c,data:e,cache:!0,dataType:"jsonp",success:function(a){if(a){var c=new Map;for(var d in a)utils.isEmptyObject(a[d])||c.put(d,a[d]);var e=b.pListItem;for(var f=0,g=e.length;g>f;f++){var h=e.eq(f);var i=h.attr("data-sku");var j=c.get(i);if(j){var k="";var l=j.name;if(l){k='<span class="buy-score" title="\u4eac\u4e1c\u4e0e\u7b2c\u4e09\u65b9\u5408\u4f5c\u5bf9\u5546\u54c1\u6027\u80fd\u3001\u5b89\u5168\u6027\u3001\u5916\u89c2\u7b49\u8fdb\u884c\u7efc\u5408\u8bc4\u4f30\u5f97\u51fa\u9009\u8d2d\u6307\u6570">\u9009\u8d2d\u6307\u6570<em>'+l+"</em></span>";var m=$(".p-commit",h);m.prepend(k)}}}}}})}},initZhiShu_slave:function(a){var b=this;if(a&&!(a.length<1)){var c="//c.3.cn/product/tag?";{this.area.join("_")}var e={my:"list_zhishu",skuIds:a.join(",")};$.ajax({url:c,data:e,cache:!0,dataType:"jsonp",success:function(a){if(a)for(var c in a)if(!utils.isEmptyObject(a[c])){var d=a[c];var e=b.slaveWareMap.get(c);e&&(e.zhishu=d.name)}}})}},limitDJD:function(){if(!("undefined"==typeof limit_ids||limit_ids.length<1||"0"==this.gjz)){var a=new Map;for(var b in limit_ids)a.put(limit_ids[b],b);var c=this.pListItem;for(var d=0,e=c.length;e>d;d++){var f=c.eq(d);var g=f.attr("data-sku");var h=a.get(g);if(h){f.attr("selfservice","3");var i=$(".p-stock",f);i.attr("limit","1");var j=this.slaveWareMap.get(g);j&&(j.limit="1")}}}},initPromotionTag:function(a){var b=this;if(a&&!(a.length<1)){var c="//pf.3.cn/flags/mgets?";var d=this.area.join("_");var e={my:"list_pro_tag",area:d,source:"list_pc_front",skuids:"J_"+a.join(",J_")};$.ajax({url:c,data:e,cache:!0,dataType:"jsonp",success:function(a){if(a){var c=new Map;var d=new Map;for(g=0;g<a.length;g++){var e=a[g].pid;e&&(c.put(e,a[g].pf),d.put(e,a[g].pfex.ctag))}var f=b.pListItem;for(var g=0,h=f.length;h>g;g++){var i=f.eq(g);var j=i.attr("data-sku");var k=c.get(j);var l=d.get(j);if(k){var m=[];if("list.jd.hk"==location.host){for(var n=0;n<k.length;n++)if(params.icon_up)switch(k[n]){case 22:m.push('<i class="icons" title="\u4f7f\u7528\u4eac\u8c46\u53ef\u4eab\u53d7\u4f18\u60e0">\u4f18\u60e0\u8d2d</i>');break;case 55:m.push('<i class="icons" title="\u6ee1\u51cf">\u6ee1\u51cf</i>');break;case 11:m.push('<i class="icons" title="\u6307\u5b9a\u7ea7\u522b\u4f1a\u5458\u53ef\u4eab\u53d7\u4f18\u60e0">\u7279\u4ef7</i>');break;case 1:m.push('<i class="goods-icons" title="\u672c\u5546\u54c1\u6b63\u5728\u964d\u4ef7\u9500\u552e\u4e2d">\u76f4\u964d</i>');break;case 5:(!l||l.indexOf("5_1")>-1)&&m.push('<i class="icons" title="\u8d2d\u4e70\u672c\u5546\u54c1\u9001\u8d60\u54c1">\u8d60\u54c1</i>');break;case 3:m.push('<i class="icons" title="\u8d2d\u4e70\u672c\u5546\u54c1\u8fd4\u4f18\u60e0\u5238">\u8fd4\u5238</i>');break;case 4:m.push('<i class="icons" title="\u8d2d\u4e70\u672c\u5546\u54c1\u9001\u4eac\u8c46">\u8c46</i>')}else switch(k[n]){case 22:m.push('<i class="icons J-picon-tips" data-tips="<div class=&quot;picon-tips&quot;><i class=&quot;goods-icons&quot;>\u4f18\u60e0\u8d2d</i></div><em>\u4f7f\u7528\u4eac\u8c46\u53ef\u4eab\u53d7\u4f18\u60e0</em>">\u4f18\u60e0\u8d2d</i>');break;case 55:m.push('<i class="icons J-picon-tips" data-tips="<div class=&quot;picon-tips&quot;><i class=&quot;goods-icons&quot;>\u6ee1\u51cf</i></div><em>\u6ee1\u51cf</em>">\u6ee1\u51cf</i>');break;case 11:m.push('<i class="icons J-picon-tips" data-tips="<div class=&quot;picon-tips&quot;><i class=&quot;goods-icons&quot;>\u7279\u4ef7</i></div><em>\u6307\u5b9a\u7ea7\u522b\u4f1a\u5458\u53ef\u4eab\u53d7\u4f18\u60e0</em>">\u7279\u4ef7</i>');break;case 1:m.push('<i class="goods-icons J-picon-tips" data-tips="<div class=&quot;picon-tips&quot;><i class=&quot;goods-icons&quot;>\u76f4\u964d</i><em>\u672c\u5546\u54c1\u6b63\u5728\u964d\u4ef7\u9500\u552e\u4e2d</em></div>">\u76f4\u964d</i>');break;case 5:(!l||l.indexOf("5_1")>-1)&&m.push('<i class="goods-icons J-picon-tips" data-tips="<div class=&quot;picon-tips&quot;><i class=&quot;goods-icons&quot;>\u8d60</i><em>\u8d2d\u4e70\u672c\u5546\u54c1\u9001\u8d60\u54c1</em></div>">\u8d60</i>');break;case 3:m.push('<i class="icons J-picon-tips" data-tips="<div class=&quot;picon-tips&quot;><i class=&quot;goods-icons&quot;>\u8fd4\u5238</i></div><em>\u8d2d\u4e70\u672c\u5546\u54c1\u8fd4\u4f18\u60e0\u5238</em>">\u8fd4\u5238</i>');break;case 4:m.push('<i class="icons J-picon-tips" data-tips="<div class=&quot;picon-tips&quot;><i class=&quot;goods-icons&quot;>\u8c46</i></div><em>\u8d2d\u4e70\u672c\u5546\u54c1\u9001\u4eac\u8c46</em>">\u8c46</i>')}if(m.length>0){var o=$(".J-pro-icons",i),p=m.join(""),q=o.find(".goods-icons-img"),r=o.find(".unit-price");q.length?q.last().after(p):o.find(".js-local-store").length&&!q.length?o.find(".js-local-store").last().after(p):o.find("#js-jdps").length&&!q.length?o.find("#js-jdps").last().after(p):o.find("#js-jdzy").length&&!q.length?o.find("#js-jdzy").last().after(p):r.length&&!q.length?r.after(p):o.prepend(p)}}else{var o=$(".p-icons",i);$.inArray(55,k)>-1&&m.push('<i class="icon-group-11 goods-icons4 J-picon-tips" data-tips="\u8be5\u5546\u54c1\u53c2\u52a0\u6ee1\u51cf\u6d3b\u52a8">\u6ee1\u51cf</i>'),$.inArray(58,k)>-1&&m.push('<i class="icon-group-13 goods-icons4 J-picon-tips" data-tips="\u8be5\u5546\u54c1\u53c2\u52a0\u6ee1\u8d60\u6d3b\u52a8">\u6ee1\u8d60</i>'),$.inArray(5,k)>-1&&(!l||l.indexOf("5_1")>-1)&&-1==$.inArray(58,k)&&m.push('<i class="icon-group-14 goods-icons4 J-picon-tips" data-tips="\u8d2d\u4e70\u672c\u5546\u54c1\u9001\u8d60\u54c1">\u8d60</i>'),m.length>0&&appendIcon2Page(o,11,m.join(""))}}}}}})}},strip_tags:function(a,b){b=(((b||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var c=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,d=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return a.replace(d,"").replace(c,function(a,c){return b.indexOf("<"+c.toLowerCase()+">")>-1?a:""})},initAdWords:function(a){var b=this;if(a&&!(a.length<1)){var c="//ad.3.cn/ads/mgets?";var d={my:"list_adWords",source:"JDList",skuids:"AD_"+a.join(",AD_")};$.ajax({url:c,data:d,cache:!0,dataType:"jsonp",success:function(a){if(a){for(g=0;g<a.length;g++){var c=a[g].id.replace("AD_","");if(c){var d=b.strip_tags(a[g].ad);var e=b.slaveWareMap.get(c);e?e.ad=d:b.slaveWareMap.put(c,{ad:d})}}var f=b.pListItem;for(var g=0,h=f.length;h>g;g++){var i=f.eq(g);var j=i.attr("data-sku");var k=b.slaveWareMap.get(j);if(k){var l=$(".p-img img",i);l.attr("title",k.ad);var m=$(".p-name a",i);m.eq(0).attr("title",k.ad);var n=$(".promo-words",i);n.html(k.ad)}}}}})}},initYuShouData:function(a){var b=this;var c=b.yushouItem;var d=b.yushouSubItem;if(c=c.concat(d),a&&(c=a),c.length>0)for(var e=0;e<c.length;e++){var f=c[e];var g="//yushou.jd.com/youshouinfo.action?sku="+f;!function(a){a&&""!=a&&$.ajax({url:g,data:"",cache:!0,dataType:"jsonp",success:function(c){if(c){var d=$("#plist .j-sku-item[data-active-sku="+a+"]");d.length>0&&b.yushouCallback(c,a),"2"==c.type&&b.yushouMap.put(a,c)}}})}(f)}},yushouCallback:function(a,b){var c=this;var d=$("#plist .j-sku-item[data-active-sku="+b+"]");var e=$('[data-active-sku="'+b+'"]');if(2==a.type){e.find(".p-presell-time").remove(),e.find(".p-presell-stage").remove(),e.find(".p-price .hoverd").remove();var f=a.ret;var b=f.w;var g=!0;for(var h=0;h<this.yushouTimerList.length;h++)b==this.yushouTimerList[h].w&&(g=!1);if(g&&this.yushouTimerList.push({w:b,d:f.d,s:f.s}),1==f.t){d.find(".p-name").prepend(0==f.s?'<div class="p-presell-time"><i></i><span>\u9884\u552e\u4e2d</span><em>'+this.convertSecond2Date(a.ret.d)+"\u540e\u5f00\u59cb</em></div>":'<div class="p-presell-time"><i></i><span>\u9884\u552e\u4e2d</span><em>\u5269\u4f59'+this.convertSecond2Date(a.ret.d)+"</em></div>");var i="";if(i=f.oriPrice?f.oriPrice:f.cp,1==f.hideRealPrice)d.find(".p-price").find("strong").html("<i>\u5f85\u53d1\u5e03</i>"),d.find(".p-price").attr("data-hiderealprice",1);else if(i){d.find(".p-price").find("strong").html("<em>\xa5</em><i>"+i+"</i>");var j=c.slaveWareMap.get(b);j&&(j.ys_p=i>0?i:"\u6682\u65e0\u62a5\u4ef7")}d.find(".p-stock").removeClass("p-stock").html("")}if(2==f.t){var k='<div class="p-presell-stage clearfix">';var l="\u6682\u65e0\u62a5\u4ef7";for(var h=0;h<f.sa.length;h++){var m=f.sa[h];var n="timeout";var p="";h==f.cs-1&&(l=m.m,n=" curr",d.find(".p-price strong:last").after('<em class="hoverd">(\u5df2\u6709'+f.cc+"\u4eba\u9884\u8ba2)</em>")),k+='<span class="item  '+n+'"><a href="javascript:void(0)"><em>\u6ee1'+m.c+"\u4eba</em>"+p+"<strong>\uffe5"+m.m+'</strong></a><i class="bottom"><em></em></i></span>'}k+="</div>",$(k).insertAfter(d.find(".p-price")),d.find(".p-price").find("strong").html(1==f.hideRealPrice||1==f.hidePrice&&3==f.cs?"<i>\u5f85\u53d1\u5e03</i>":"<em>\xa5</em><i>"+l+"</i>");var q=$("a.addcart",d);"1"==params.delivery?q.attr({href:"//item.jd.com/"+b+".html&dist=jd"}).addClass("p-o-btn addcart").html("<i></i>\u53c2\u4e0e\u62a2\u8d2d"):q.attr({href:"//item.jd.com/"+b+".html"}).addClass("p-o-btn addcart").html("<i></i>\u53c2\u4e0e\u62a2\u8d2d"),d.find(".p-stock").removeClass("p-stock").html("")}}else 1==a.type?(1==a.state&&d.find(".p-stock").remove(),2==a.state&&(d.find(".p-stock").remove(),d.append('<div class="p-presell-time"><i></i><span>\u9884\u7ea6\u4e2d</span><em></em></div>')),3==a.state&&(d.find(".p-stock").remove(),d.append('<div class="p-presell-time"><i></i><span>\u62a2\u8d2d\u5373\u5c06\u5f00\u59cb</span><em></em></div>')),4==a.state&&(d.find(".p-stock").remove(),d.append('<div class="p-presell-time"><i></i><span>\u62a2\u8d2d\u4e2d</span><em></em></div>')),5==a.state&&d.find(".p-stock").remove(),d.find(".js_ys").length&&(d.find(".J_price").hide(),d.find(".js_ys").show())):d.find(".js_ys").length&&(d.find(".J_price").hide(),d.find(".js_ys").show())},formatStr:function(a,b){var a="000000000"+a;return a.substring(a.length,a.length-b)},convertSecond2Date:function(a){var b=60;var c=60*b;var d=24*c;var e=Math.floor(a/d);var f=Math.floor((a-e*d)/c);var g=this.formatStr(Math.floor((a-e*d-f*c)/b),2);var h=this.formatStr(Math.floor(a-e*d-f*c-g*b),2);return 0==e?f+":"+g+":"+h:e+"\u5929 "+f+":"+g+":"+h},showYushouTime:function(){var a=this.yushouTimerList;for(var b=0;b<a.length;b++){var c=a[b];if(c.d--,c.t<0)return;var d=$("#plist .j-sku-item[data-active-sku="+c.w+"]");d.find(".p-presell-time").length<1&&d.find(".p-name").prepend('<div class="p-presell-time"></div>'),d.find(".p-presell-time").html(0==c.s?"<i></i><span>\u9884\u552e\u4e2d</span><em>"+this.convertSecond2Date(c.d)+"\u540e\u5f00\u59cb</em>":"<i></i><span>\u9884\u552e\u4e2d</span><em>\u5269\u4f59"+this.convertSecond2Date(c.d)+"</em>")}},getBrandsAll:function(){var a=this;if(!a.brandAllFlag&&params.brandsLen>18){var b=baseURL||"";var c=window.location.pathname+"?"+b+"&md=1";"coll.jd.com"==location.host||"fh.jd.com"==location.host?(c="//fhs.jd.com/api/getattrinfo?"+b+"&md=1&fhc=pc",$.ajax({url:c,data:{my:"list_brand"},cache:!0,dataType:"jsonp",success:function(b){b&&a.buildBrands(b)}})):$.ajax({url:c,data:{my:"list_brand"},cache:!0,dataType:"json",success:function(b){b&&a.buildBrands(b)}})}},getPubsAll:function(){var a=this;if(!a.pubAllFlag&&params.pubsLen>18){var b=baseURL||"";var c=window.location.pathname+"?"+b+"&md=2";$.ajax({url:c,data:{my:"list_pub"},cache:!0,dataType:"json",success:function(b){b&&a.buildPubs(b)}})}},hideEmptyBrandLetter:function(){var a=$(".s-brand");var b=$(".s-brand ul.J_valueList");$(".J_brandLetter li[data-initial]:not(:first)",a).each(function(){var a=$(this).attr("data-initial");0==$("li[data-initial="+a+"]",b).length?$(this).hide():$(this).attr("style","display: ")})},buildPubs:function(a){var b=a.pubs;var c=[];var d=18;("coll.jd.com"==document.location.host||"fh.jd.com"==document.location.host)&&(d=16);for(var e=0;e<b.length;e++)if(e>=d){var f=b[e];var g=f.id;var h=f.name;var i=f.pinyin||"";var j=this.getExpandsUrl("publishers",g)+"&JL=3_\u51fa\u7248\u793e_"+h;c.push('<li id="pub-'),c.push(g),c.push('" data-initial="'),c.push(i.toLowerCase()),c.push('">'),c.push('<a href="'),c.push(j),c.push('" title="'),c.push(h),c.push('" rel="nofollow">'),c.push("<i></i>"),c.push(h),c.push("</a>"),c.push("</li>")}$("#pubsArea").append(c.join("")),this.pubAllFlag=!0,pageConfig.setBrandWordsTab(),this.hideEmptyBrandLetter()},buildBrands:function(a){var b=a.brands;var c=[];var d=18;("coll.jd.com"==document.location.host||"fh.jd.com"==document.location.host)&&(d=16);for(var e=0;e<b.length;e++)if(e>=d){var f=b[e];var g=f.id;var h=f.name;var i=f.pinyin||"";var j=f.logo||"";var k=this.getExpandsUrl("brand",g)+"&JL=3_\u54c1\u724c_"+h;c.push('<li id="brand-'),c.push(g),c.push('" data-initial="'),c.push(i.toLowerCase()),c.push('">'),c.push('<a href="'),c.push(k),c.push('" title="'),c.push(h),c.push('" rel="nofollow">'),c.push("<i></i>"),this.isLogo&&""!=j&&"list.jd.hk"!=document.location.host&&(c.push('<img src="'),c.push(j),c.push('" width="102" height="36" data-lazy-img="done" class="loading-style2">')),c.push(h),c.push("</a>"),c.push("</li>")}$("#brandsArea").append(c.join("")),this.brandAllFlag=!0,pageConfig.setBrandWordsTab(),this.hideEmptyBrandLetter()},getAttrValue2:function(a,b){if(b){var c=b.indexOf("#");c>0&&(b=b.substr(0,c))}var d=new RegExp("(^|\\?|&)"+a+"=([^&]*)(\\s|&|$)","i");var e="";return d.test(b)&&(e=d.exec(b),e=e[2]),e},getAttrValue:function(a,b){var c=new RegExp("(^|\\?|&)"+a+"=([^&#]*)(\\s|&|$)","i");var d="";return c.test(b)&&(d=c.exec(b),d=d[2]),d},getExpandsUrl:function(a,b){var c=baseURL||"";var d=this.getAttrValue("ev",c);var e=[];d&&(e=d.split(/\%40|\@/)),e.push("ext"==a?b.extid+"_"+b.extValueId:"brand"==a?"exbrand_"+b:"expublishers_"+b);var f=window.location.pathname+"?"+c.replace(/(^|\\?|&)ev=([^&#]*)/g,"");return f+"&ev="+e.join("@")},getUUID:function(){var a=readCookie("__jda");if(a){var b=a.split(".");if(b.length>=2){var c=b[1];c&&(this.uuid=c)}}this.pin=readCookie("pin")||"",this._pst=readCookie("_pst")||""},abtest10:function(){var a="A";if(this.uuid){var b=this.uuid%2;switch(b){case 0:a="P";break;case 1:a="L"}}return params.abTestFlag=a,a},initGG:function(){var a=baseURL||"";var b=this.getAttrValue("ev",a);var c=[];var d=[];var e=!1;var f=!1;var g=!1;var h=!1;b?c=b.split(/\%40|\@/):(e=!0,g=!0,h=!0);for(var i in c)if(c.hasOwnProperty(i)){var j=c[i].split(/\%5F|\_/);if("exbrand"==j[0])e=!0,d.push("exbrandid_"+decodeURIComponent(j[1]));else if("exprice"==j[0]){var k=j[1].replace("M","");var l=k.split("L");var m="";m=l.length>1?l[0]+"-"+l[1]:l[0]+"gt",d.push("exprice_"+m),e=!0}else d.push(j[0]+"_"+j[1]),e=!0}f&&(e=!1);var n=$(".selector-set a");n.length>0&&n.each(function(){var a=$(this).find("b").text();var b=$.trim($(this).find("em").text());a.indexOf("\u989c\u8272")>-1&&(d.push("excolor_"+b),e=!0),(a.indexOf("\u5c3a\u7801")>-1||a.indexOf("\u5c3a\u5bf8")>-1)&&(d.push("exsize_"+b),e=!0)});var o=this.getAttrValue("sort",a);o=decodeURIComponent(o),""==o&&(e=!1,h=!1),params.multipleSort_view&&(e=!0,g=!0,h=!0,"sort_totalsales15_desc"==o&&(e=!1,g=!1,h=!1)),params.multipleSort_view||"sort_totalsales15_desc"!=o&&""!=o||(e=!1,g=!1,h=!1),("sort_dredisprice_desc"==o||"sort_dredisprice_asc"==o||"sort_commentcount_desc"==o||"sort_winsdate_desc"==o)&&(e=!1,g=!1,h=!1);var p=this.getAttrValue("delivery",a);"1"==p&&(e=!1,g=!1,h=!1);var q=this.getAttrValue("delivery_daofu",a);"3"==q&&(e=!1,g=!1,h=!1);var r=this.getAttrValue("delivery_211",a);"1"==r&&(e=!1,g=!1,h=!1);var s=this.getAttrValue("stock",a);"1"==s&&(e=!1,g=!1,h=!1);var t=this.getAttrValue("delivery_glb",a);"1"==t&&(e=!1,g=!1,h=!1);var u=this.getAttrValue("icon",a);""!=u&&(e=!1,g=!1,h=!1);var v=this.getAttrValue("icon2",a);""!=v&&(e=!1,g=!1,h=!1);var w=this.getAttrValue("icon3",a);""!=w&&(e=!1,g=!1,h=!1);var x=this.getAttrValue("global",a);""!=x&&(e=!1,g=!1,h=!1);var y=this.getAttrValue("newpro",a);""!=y&&(e=!1,g=!1,h=!1);var z=this.getAttrValue("e",a);""!=z&&(e=!1,g=!1,h=!1);var A=this.getAttrValue("cat",a);var B=this.getAttrValue("tid",a);var C=A.split(/\%2C|\,/);C.length<3&&!B&&(e=!1),b&&(g=!1,h=!1),("1"===params.mallpro||"1"===params.newpro)&&(e=!1,g=!1,h=!1),params.show_jzun&&"1"==params.delivery_jzun&&(e=!1,g=!1,h=!1),this.gxhFlag=g,this.kwhFlag=h,"undefined"!=typeof baseURL&&"1"==this.baseConf.show_ad&&"1"==this.newConf.ad_set&&1==params.pageNo&&document.location.host==listDomain?e?this.getGGData(d.join("@")):this.initkengweiCCH():"undefined"!=typeof baseURL&&1==params.pageNo&&document.location.host==listDomain&&this.initkengweiCCH()},getGGData:function(a){var b=this;var c="//x.jd.com/ShowInterface";var d={ad_type:7,new_list:1,spread_type:1,ad_ids:"1755:6",urlcid3:params.id3,ev:a,location_info:b.area.join("_"),pin:b.pin,__jda:readCookie("__jda")||"",my:"gg666"};params.multicid3&&params.multicid3.split(",").length>0&&(d.multicid3=params.multicid3),$.ajax({url:c,data:d,cache:!0,dataType:"jsonp",success:function(a){if(a){var c=params.paragraph_tpl_type||0;var d=b.ggSKUMap;var e=a[1755]||[];if(b.guanggaoList=e,e&&e.length>0){for(var f in e){var g=e[f];var h=4+8*f;g.index=h,d.put(g.sku_id,g)}var i=b.$plist.find(".gl-item");var j=i.length;var k=60>j?59-e.length:j-e.length-1;var l=0;for(var f=0;j>f;f++){var m=i.eq(f);var n=m.find(".j-sku-item").eq(0);var o=n.attr("data-sku");var p=d.get(o);p&&(d.remove(o),l+=1)}for(var f=j-1;f>k+l;f--){var m=i.eq(f);m.remove(),b.gg_miss++}var q=d.values();for(var f in q){var g=q[f];var h=4+8*f;g.index=h}var r=[];for(var f=0;f<q.length;f++){var s=q[f]||{};var h=q[f].index;h>j&&(h=j);var m=i.eq(h-1);var t=s.color;var o=s.sku_id;var u=s.ad_title;var v=2==s.worldwide?'<span class="p-tag2" style="background:#7d256e">\u5168\u7403\u8d2d</span>':"";var w=s.click_url;var x=s.comment_num;x=b.mohupingluns(x),r.push(o);var y=s.SlaveWare||[];var z=[];if(y.length>0)for(var A=0;A<y.length;A++){var e=y[A];var B=[];B.push('<li class="ps-item">'),B.push('<a title="'+e.Content.color+' " href="javascript:;">'),B.push('<img data-sku="'+e.wareid+'" data-url="'+e.Content.click_url+'" data-lazy-img="done" width="25" height="25" src="//img13.360buyimg.com/n9/'+e.Content.imageurl+'">'),B.push("</a>"),B.push("</li>"),z.push(B.join(""))
}var C=[];C.push('<li class="gl-item"><div class="gl-i-wrap j-sku-item " alg="-1" data-sku="'),C.push(o),C.push('" venderid="'),C.push(s.vender_id),C.push('" jdzy_shop_id="'),C.push(s.shop_id),C.push('">'),C.push('<div class="p-img">'),1==c?(C.push('<a target="_blank" href="'),C.push(w),C.push('"><img width="220" height="282" data-img="1" data-lazy-img="done" src="//img11.360buyimg.com/n8/'),C.push(s.image_url),C.push('" title="'),C.push(u),C.push('"></a>')):(C.push('<a target="_blank" href="'),C.push(w),C.push('"><img width="220" height="220" data-img="1" data-lazy-img="done" src="//img11.360buyimg.com/n7/'),C.push(s.image_url),C.push('" title="'),C.push(u),C.push('"></a>')),C.push("</div>"),(1==c||2==c)&&(C.push('<div class="p-scroll"><span class="ps-prev">&lt; </span><span class="ps-next">&gt;</span><div class="ps-wrap"><ul class="ps-main"><li class="ps-item"><a title="'),C.push(t),C.push('" href="javascript:;"><img data-sku="'),C.push(o),C.push('" data-url="'),C.push(w),C.push('" width="25" height="25" class="" data-lazy-img="done" src="//img13.360buyimg.com/n9/'),C.push(s.image_url),C.push('"></a></li>'),C.push(z.join("")),C.push("</ul></div></div>"));var D=params.icon_up;var E=!1;if(C.push('<div class="p-price"><strong class="J_price"><em></em><i></i></strong>'),D&&(E=!0),C.push("</div>"),C.push('<div class="p-name"><a target="_blank" title="'),C.push(u),C.push('" href="'),C.push(w),C.push('"><em>'),C.push(v),C.push(u),C.push('</em><i class="promo-words"></i></a></div>'),5!=c&&(C.push('<div class="p-commit"><strong>\u5df2\u6709<a class="comment" target="_blank" href="//item.jd.com/'),C.push(o),C.push('.html#comment">'),C.push(x),C.push("</a>\u4eba\u8bc4\u4ef7</strong></div>")),1==c||2==c?(C.push('<div class="p-focus"><a class="J_focus" data-sku="'),C.push(o),C.push('" href="javascript:;"><i></i>\u5173\u6ce8</a></div>'),C.push('<div class="p-shop " data-score="4" data-reputation="0" data-shopid="" data-shop_name="" data-done="1"></div>')):"b"==params.abTempFlag.toLowerCase()&&0==c?(C.push('<div class="p-shop" data-score="4" data-reputation="0" data-shopid="" data-shop_name="" data-done="1"></div>'),C.push('<div class="p-icons J-pro-icons"></div>')):C.push('<div class="p-shop hide" data-score="4" data-reputation="0" data-shopid="" data-shop_name="" data-done="1"></div>'),"b"==params.abTempFlag.toLowerCase()?0==c&&(E||(E=!0)):0==c&&(E||(E=!0,C.push('<div class="p-icons J-pro-icons"></div>')),C.push('<div class="p-operate"><a class="p-o-btn contrast J_contrast" data-sku="'),C.push(o),C.push('" href="javascript:;"><i></i>\u5bf9\u6bd4</a> <a class="p-o-btn focus J_focus" data-sku="'),C.push(o),C.push('" href="javascript:;"> <i></i>\u5173\u6ce8 </a><a class="p-o-btn addcart" target="_blank" href="//cart.jd.com/gate.action?pid='),C.push(o),C.push('&amp;pcount=1&amp;ptype=1"><i></i>\u52a0\u5165\u8d2d\u7269\u8f66</a></div>')),(3==c||5==c)&&(E||(E=!0,C.push('<div class="p-icons J-pro-icons"></div>')),C.push('<div class="p-operate"><a class="p-o-btn contrast J_contrast" data-sku="'),C.push(o),C.push('" href="javascript:;"><i></i>\u5bf9\u6bd4</a> <a class="p-o-btn focus J_focus" data-sku="'),C.push(o),C.push('" href="javascript:;"> <i></i>\u5173\u6ce8 </a><a class="p-o-btn addcart" target="_blank" href="//cart.jd.com/gate.action?pid='),C.push(o),C.push('&amp;pcount=1&amp;ptype=1"><i></i>\u52a0\u5165\u8d2d\u7269\u8f66</a></div>')),E||C.push('<div class="p-icons J-pro-icons"></div>'),C.push('<div class="p-stock" data-isdeliveryable="5" style="display: none;" data-stock_v="1" data-stock_h="33"></div>'),C.push('<span class="p-promo-flag">\u5e7f\u544a</span>'),C.push("</div></li>"),m.after(C.join("")),!isPop(o)&&!params.istsyx&&"list.jd.hk"!=location.host){var F=m.next().find(".p-icons");appendIcon2Page(F,1,'<i class="icon-group-1 goods-icons J-picon-tips" data-tips="\u4eac\u4e1c\u81ea\u8425\uff0c\u54c1\u8d28\u4fdd\u969c">\u81ea\u8425</i>')}}b.pListItem=b.$plist.find(".j-sku-item"),b.initPriceLimit(r),b.baseConf.kucun&&b.get_stock(r),b.baseConf.chuxiaobq&&b.initPromotionTag(r),b.initAdWords(r),!b.baseConf.dianpu||1!=c&&2!=c?b.baseConf.dianpu&&b.getDianPuInfoBySKU(r):b.getDianPuInfoBySKU(r)}}b.initGGMissSkuSetPage(),b.initGeXingH()}})},mohupingluns:function(a){var b=0;var c=a+"";if(10>=a)b=a;else if(a>10&&100>a)b=c.substr(0,1)+"0+";else if(a>100&&1e3>a)b=c.substr(0,1)+"00+";else if(a>1e3&&1e4>a)b=c.substr(0,2)+"00+";else if(a>1e4&&11e3>a)b="1\u4e07+";else if(a>11e3&&1e5>a){var d=c.substr(1,1);b=0==d?c.substr(0,1)+"\u4e07+":c.substr(0,1)+"."+c.substr(1,1)+"\u4e07+"}else a>1e5&&1e6>a&&(b=c.substr(0,2)+"\u4e07+");return b},initGeXingH:function(){var _this=this;var gxhFlag=_this.gxhFlag||!1;var pin=decodeURIComponent(_this.pin);if(pin||(gxhFlag=!1),gxhFlag&&_this.newConf&&"1"==_this.newConf.gexinghua&&_this.baseConf.gexinghua){var url="//maya.jd.com/sku/rec?";var param={my:"list_gxh",cat1:params.firstCatId,cat2:params.secondCatId,cat3:params.thirdCatId,pagesize:"3"};$.ajax({url:url,data:param,cache:!0,dataType:"jsonp",success:function(r){if(r&&null!=r.items){var tpl_type=params.paragraph_tpl_type||0;var items=r.items;_this.alg=r.alg;var alg=_this.alg;var skuMap=_this.gexinghSKUMap;for(var i=0;i<items.length;i++){var item=items[i];skuMap.put(item.id,item)}var pListItem=_this.$plist.find(".gl-item");var pListItemLength=pListItem.length;var removeIndex=60>pListItemLength?59-items.length:pListItemLength-items.length-1;var cf_num=0;for(var i=0;pListItemLength>i;i++){var item=pListItem.eq(i);var itemFri=item.find(".j-sku-item").eq(0);var skuId=itemFri.attr("data-sku");var ggArr=skuMap.get(skuId);ggArr&&(skuMap.remove(skuId),cf_num+=1)}for(var i=pListItemLength-1;i>removeIndex+cf_num;i--){var item=pListItem.eq(i);var skuId=item.attr("data-sku");item.remove(),_this.gg_miss++}var priceArr=[];var item=pListItem.eq(4);var temp2=skuMap.values();for(var i=temp2.length-1;i>=0;i--){var skuArr=temp2[i]||{};var base_info=skuArr.base_info;var imageUrl=base_info.imageUrl;var color=base_info.color;var skuId=skuArr.id;var ad_title=base_info.name;var click_url="//item.jd.com/"+skuId+".html?jd_list=1&alg="+alg;var comment_num=skuArr.comments;comment_num=_this.mohupingluns(comment_num),priceArr.push(skuId);var slave_ware=skuArr.slave_ware||[];var slaveWareArr=eval(slave_ware);var slaveWareHtml=[];if(slaveWareArr.length>0)for(var sla=0;sla<slaveWareArr.length;sla++){var temp=slaveWareArr[sla];var slave_skuId="",slave="",slave_click_url="",img_url="",slave_color="";for(var prop in temp)slave_skuId=prop,slave=temp[prop];if(slave){slave_click_url="//item.jd.com/"+slave_skuId+".html?jd_list=1&alg="+alg,img_url=slave.imageUrl,slave_color=slave.color;var slaveHtml=[];slaveHtml.push('<li class="ps-item">'),slaveHtml.push('<a title="'+slave_color+' " href="javascript:;">'),slaveHtml.push('<img data-sku="'+slave_skuId+'" data-url="'+slave_click_url+'" data-lazy-img="done" width="25" height="25" src="//img13.360buyimg.com/n9/'+img_url+'">'),slaveHtml.push("</a>"),slaveHtml.push("</li>"),slaveWareHtml.push(slaveHtml.join(""))}}var skuHtml=[];skuHtml.push('<li class="gl-item"><div class="gl-i-wrap j-sku-item" data-sku="'),skuHtml.push(skuId),skuHtml.push('" venderid="'),skuHtml.push(base_info.venderId),skuHtml.push('" jdzy_shop_id="'),skuHtml.push(base_info.shopId),skuHtml.push('" alg="'),skuHtml.push(alg),skuHtml.push('">'),skuHtml.push('<div class="p-img">'),1==tpl_type?(skuHtml.push('<a target="_blank" href="'),skuHtml.push(click_url),skuHtml.push('"><img width="220" height="282" data-img="1" data-lazy-img="done" src="//img11.360buyimg.com/n8/'),skuHtml.push(imageUrl),skuHtml.push('" title="'),skuHtml.push(ad_title),skuHtml.push('"></a>')):(skuHtml.push('<a target="_blank" href="'),skuHtml.push(click_url),skuHtml.push('"><img width="220" height="220" data-img="1" data-lazy-img="done" src="//img11.360buyimg.com/n7/'),skuHtml.push(imageUrl),skuHtml.push('" title="'),skuHtml.push(ad_title),skuHtml.push('"></a>')),skuHtml.push("</div>"),(1==tpl_type||2==tpl_type)&&(skuHtml.push('<div class="p-scroll"><span class="ps-prev">&lt; </span><span class="ps-next">&gt;</span><div class="ps-wrap"><ul class="ps-main"><li class="ps-item"><a title="'),skuHtml.push(color),skuHtml.push('" href="javascript:;"><img data-sku="'),skuHtml.push(skuId),skuHtml.push('" data-url="'),skuHtml.push(click_url),skuHtml.push('" width="25" height="25" class="" data-lazy-img="done" src="//img13.360buyimg.com/n9/'),skuHtml.push(imageUrl),skuHtml.push('"></a></li>'),skuHtml.push(slaveWareHtml.join("")),skuHtml.push("</ul></div></div>"));var icon_up=params.icon_up;var pushed_icon=!1;skuHtml.push('<div class="p-price"><strong class="J_price"><em></em><i></i></strong>'),icon_up&&(pushed_icon=!0,skuHtml.push('<div class="p-icons J-pro-icons"></div>')),skuHtml.push("</div>"),skuHtml.push('<div class="p-name"><a target="_blank" title="'),skuHtml.push(ad_title),skuHtml.push('" href="'),skuHtml.push(click_url),skuHtml.push('"><em>'),skuHtml.push(ad_title),skuHtml.push('</em><i class="promo-words"></i></a></div>'),5!=tpl_type&&(skuHtml.push('<div class="p-commit"><strong>\u5df2\u6709<a class="comment" target="_blank" href="//item.jd.com/'),skuHtml.push(skuId),skuHtml.push('.html#comment">'),skuHtml.push(comment_num),skuHtml.push("</a>\u4eba\u8bc4\u4ef7</strong></div>")),"b"==params.abTempFlag.toLowerCase()?0==tpl_type&&(pushed_icon||(pushed_icon=!0,skuHtml.push('<div class="p-icons J-pro-icons"></div>'))):0==tpl_type&&(pushed_icon||(pushed_icon=!0,skuHtml.push('<div class="p-icons J-pro-icons"></div>')),skuHtml.push('<div class="p-operate"><a class="p-o-btn contrast J_contrast" data-sku="'),skuHtml.push(skuId),skuHtml.push('" href="javascript:;"><i></i>\u5bf9\u6bd4</a> <a class="p-o-btn focus J_focus" data-sku="'),skuHtml.push(skuId),skuHtml.push('" href="javascript:;"> <i></i>\u5173\u6ce8 </a><a class="p-o-btn addcart" target="_blank" href="//cart.jd.com/gate.action?pid='),skuHtml.push(skuId),skuHtml.push('&amp;pcount=1&amp;ptype=1"><i></i>\u52a0\u5165\u8d2d\u7269\u8f66</a></div>')),3==tpl_type&&(pushed_icon||(pushed_icon=!0,skuHtml.push('<div class="p-icons J-pro-icons"></div>')),skuHtml.push('<div class="p-operate"><a class="p-o-btn contrast J_contrast" data-sku="'),skuHtml.push(skuId),skuHtml.push('" href="javascript:;"><i></i>\u5bf9\u6bd4</a> <a class="p-o-btn focus J_focus" data-sku="'),skuHtml.push(skuId),skuHtml.push('" href="javascript:;"> <i></i>\u5173\u6ce8 </a><a class="p-o-btn addcart" target="_blank" href="//cart.jd.com/gate.action?pid='),skuHtml.push(skuId),skuHtml.push('&amp;pcount=1&amp;ptype=1"><i></i>\u52a0\u5165\u8d2d\u7269\u8f66</a></div>')),1==tpl_type||2==tpl_type?(skuHtml.push('<div class="p-focus"><a class="J_focus" data-sku="'),skuHtml.push(skuId),skuHtml.push('" href="javascript:;"><i></i>\u5173\u6ce8</a></div>'),skuHtml.push('<div class="p-shop " data-score="4" data-reputation="0" data-shopid="" data-shop_name="" data-done="1"></div>')):skuHtml.push("b"==params.abTempFlag.toLowerCase()&&0==tpl_type?'<div class="p-shop" data-score="4" data-reputation="0" data-shopid="" data-shop_name="" data-done="1"></div>':'<div class="p-shop hide" data-score="4" data-reputation="0" data-shopid="" data-shop_name="" data-done="1"></div>'),pushed_icon||skuHtml.push('<div class="p-icons J-pro-icons"></div>'),skuHtml.push('<div class="p-stock" data-isdeliveryable="5" style="display: none;" data-stock_v="1" data-stock_h="33"></div>'),skuHtml.push("</div></li>"),item.after(skuHtml.join(""))}_this.pListItem=_this.$plist.find(".j-sku-item"),_this.initPriceLimit(priceArr),_this.baseConf.kucun&&_this.get_stock(priceArr),_this.baseConf.chuxiaobq&&_this.initPromotionTag(priceArr),_this.initAdWords(priceArr),!_this.baseConf.dianpu||1!=tpl_type&&2!=tpl_type?_this.baseConf.dianpu&&_this.getDianPuInfoBySKU(priceArr):_this.getDianPuInfoBySKU(priceArr),_this.hand2Conf&&this.hand2ABVersion&&_this.initershou(priceArr)}_this.initGGMissSkuSetPage(),_this.initkengweiCCH()}})}else _this.initkengweiCCH()},initkengweiCCH:function(){function isNotDue(a,b){var c;var d=new Date,e=parseInt(d.getTime()/1e3);return c=e>a&&b>e}var _this=this,url="//"+interfaceDomain+"/sku/fixpos";var param={cat3:params.thirdCatId};"1"==_this.newConf.fixpos&&_this.kwhFlag&&_this.baseConf.fixpos&&$.ajax({url:url,data:param,cache:!0,dataType:"json",success:function(r){var items=r.items,priceArr=[],tpl_type=params.paragraph_tpl_type||0,chongFuYS=[],tiHuanYS=[],alg=r.alg||-2;if(items.length){var kengWeiSKUMap=new Map,posArr=[],wuxiaoNum=0;items.sort(function(a,b){return a.pos-b.pos});for(var i=0;i<items.length;i++){var item=items[i];if(posArr.push(item.pos-1),1==item.type){if(null==item.sku){wuxiaoNum+=1;continue}item=items[i],kengWeiSKUMap.put(item.sku.id,item.pos-1)}}var cf_num=0,remove_num,remove_index;var pListItem=_this.$plist.find(".gl-item");var pListItemLength=pListItem.length;for(var i=0;pListItemLength>i;i++){var item=pListItem.eq(i);var itemFri=item.find(".j-sku-item").eq(0);var skuId=itemFri.attr("data-sku");kengWeiSKUMap.get(skuId)&&(item.remove(),cf_num+=1)}pListItem=_this.$plist.find(".gl-item");for(var i=0;i<items.length;i++){var item=items[i],pos=item.pos-1,skuHTMl="";if(pos=0>pos?0:pos,pos=pos>=pListItem.length?pListItem.length-1:pos,1==item.type||2==item.type&&!isNotDue(item.start_time,item.end_time)){if(null==item.sku)continue;var skuArr=item.sku||{};var base_info=skuArr.base_info;var imageUrl=base_info.imageUrl;var color=base_info.color;var skuId=skuArr.id;var ad_title=base_info.name;var click_url="//item.jd.com/"+skuId+".html?jd_list=1&alg="+alg;var comment_num=skuArr.comments;comment_num=_this.mohupingluns(comment_num),priceArr.push(skuId);var slave_ware=skuArr.slave_ware||[];var slaveWareArr=eval(slave_ware);var slaveWareHtml=[];if(slaveWareArr.length>0)for(var sla=0;sla<slaveWareArr.length;sla++){var temp=slaveWareArr[sla];var slave_skuId="",slave="",slave_click_url="",img_url="",slave_color="";for(var prop in temp)slave_skuId=prop,slave=temp[prop];if(slave){slave_click_url="//item.jd.com/"+slave_skuId+".html?jd_list=1&alg="+alg,img_url=slave.imageUrl,slave_color=slave.color;var slaveHtml=[];slaveHtml.push('<li class="ps-item">'),slaveHtml.push('<a title="'+slave_color+' " href="javascript:;">'),slaveHtml.push('<img data-sku="'+slave_skuId+'" data-url="'+slave_click_url+'" data-lazy-img="done" width="25" height="25" src="//img13.360buyimg.com/n9/'+img_url+'">'),slaveHtml.push("</a>"),slaveHtml.push("</li>"),slaveWareHtml.push(slaveHtml.join(""))}}var skuHtml=[];skuHtml.push('<li class="gl-item"><div class="gl-i-wrap j-sku-item" alg="-2" data-sku="'),skuHtml.push(skuId),skuHtml.push('" venderid="'),skuHtml.push(base_info.venderId),skuHtml.push('" jdzy_shop_id="'),skuHtml.push(base_info.shopId),skuHtml.push('">'),skuHtml.push('<div class="p-img">'),1==tpl_type?(skuHtml.push('<a target="_blank" href="'),skuHtml.push(click_url),skuHtml.push('"><img width="220" height="282" data-img="1" data-lazy-img="done" src="//img11.360buyimg.com/n8/'),skuHtml.push(imageUrl),skuHtml.push('" title="'),skuHtml.push(ad_title),skuHtml.push('"></a>')):(skuHtml.push('<a target="_blank" href="'),skuHtml.push(click_url),skuHtml.push('"><img width="220" height="220" data-img="1" data-lazy-img="done" src="//img11.360buyimg.com/n7/'),skuHtml.push(imageUrl),skuHtml.push('" title="'),skuHtml.push(ad_title),skuHtml.push('"></a>')),skuHtml.push("</div>"),(1==tpl_type||2==tpl_type)&&(skuHtml.push('<div class="p-scroll"><span class="ps-prev">&lt; </span><span class="ps-next">&gt;</span><div class="ps-wrap"><ul class="ps-main"><li class="ps-item"><a title="'),skuHtml.push(color),skuHtml.push('" href="javascript:;"><img data-sku="'),skuHtml.push(skuId),skuHtml.push('" data-url="'),skuHtml.push(click_url),skuHtml.push('" width="25" height="25" class="" data-lazy-img="done" src="//img13.360buyimg.com/n9/'),skuHtml.push(imageUrl),skuHtml.push('"></a></li>'),skuHtml.push(slaveWareHtml.join("")),skuHtml.push("</ul></div></div>"));var icon_up=params.icon_up;var pushed_icon=!1;skuHtml.push('<div class="p-price"><strong class="J_price"><em></em><i></i></strong>'),icon_up&&(pushed_icon=!0,skuHtml.push('<div class="p-icons J-pro-icons"></div>')),skuHtml.push("</div>"),skuHtml.push('<div class="p-name"><a target="_blank" title="'),skuHtml.push(ad_title),skuHtml.push('" href="'),skuHtml.push(click_url),skuHtml.push('"><em>'),skuHtml.push(ad_title),skuHtml.push('</em><i class="promo-words"></i></a></div>'),5!=tpl_type&&(skuHtml.push('<div class="p-commit"><strong>\u5df2\u6709<a class="comment" target="_blank" href="//item.jd.com/'),skuHtml.push(skuId),skuHtml.push('.html#comment">'),skuHtml.push(comment_num),skuHtml.push("</a>\u4eba\u8bc4\u4ef7</strong></div>")),"b"==params.abTempFlag.toLowerCase()?0==tpl_type&&(pushed_icon||(pushed_icon=!0,skuHtml.push('<div class="p-icons J-pro-icons"></div>'))):0==tpl_type&&(pushed_icon||(pushed_icon=!0,skuHtml.push('<div class="p-icons J-pro-icons"></div>')),skuHtml.push('<div class="p-operate"><a class="p-o-btn contrast J_contrast" data-sku="'),skuHtml.push(skuId),skuHtml.push('" href="javascript:;"><i></i>\u5bf9\u6bd4</a> <a class="p-o-btn focus J_focus" data-sku="'),skuHtml.push(skuId),skuHtml.push('" href="javascript:;"> <i></i>\u5173\u6ce8 </a><a class="p-o-btn addcart" target="_blank" href="//cart.jd.com/gate.action?pid='),skuHtml.push(skuId),skuHtml.push('&amp;pcount=1&amp;ptype=1"><i></i>\u52a0\u5165\u8d2d\u7269\u8f66</a></div>')),3==tpl_type&&(pushed_icon||(pushed_icon=!0,skuHtml.push('<div class="p-icons J-pro-icons"></div>')),skuHtml.push('<div class="p-operate"><a class="p-o-btn contrast J_contrast" data-sku="'),skuHtml.push(skuId),skuHtml.push('" href="javascript:;"><i></i>\u5bf9\u6bd4</a> <a class="p-o-btn focus J_focus" data-sku="'),skuHtml.push(skuId),skuHtml.push('" href="javascript:;"> <i></i>\u5173\u6ce8 </a><a class="p-o-btn addcart" target="_blank" href="//cart.jd.com/gate.action?pid='),skuHtml.push(skuId),skuHtml.push('&amp;pcount=1&amp;ptype=1"><i></i>\u52a0\u5165\u8d2d\u7269\u8f66</a></div>')),1==tpl_type||2==tpl_type?(skuHtml.push('<div class="p-focus"><a class="J_focus" data-sku="'),skuHtml.push(skuId),skuHtml.push('" href="javascript:;"><i></i>\u5173\u6ce8</a></div>'),skuHtml.push('<div class="p-shop " data-score="4" data-reputation="0" data-shopid="" data-shop_name="" data-done="1"></div>')):skuHtml.push("b"==params.abTempFlag.toLowerCase()&&0==tpl_type?'<div class="p-shop" data-score="4" data-reputation="0" data-shopid="" data-shop_name="" data-done="1"></div>':'<div class="p-shop hide" data-score="4" data-reputation="0" data-shopid="" data-shop_name="" data-done="1"></div>'),pushed_icon||skuHtml.push('<div class="p-icons J-pro-icons"></div>'),skuHtml.push('<div class="p-stock" data-isdeliveryable="5" style="display: none;" data-stock_v="1" data-stock_h="33"></div>'),skuHtml.push("</div></li>")}else if(2==item.type){var url=item.url,imgUrl,w,h;switch(tpl_type){case 1:imgUrl=item.imgurl3,w=220,h=432;break;case 2:imgUrl=item.imgurl2,w=220,h=366;break;default:imgUrl=item.imgurl,w=220,h=334}var skuHtml=['<li class="gl-item">','<div class="j-sku-item gl-i-wrap">','<a href="'+url+'" target="_blank">','<img src="'+imgUrl+'"  data-lazy-img="done" width="'+w+'" height="'+h+'"/>',"</a>","</div>","</li>"];pListItem=_this.$plist.find(".gl-item"),pListItemLength=pListItem.length,remove_num=items.length-wuxiaoNum-cf_num,remove_index=pListItemLength-remove_num;for(var i=pListItemLength-1;i>remove_index-1;i--)pListItem.eq(i).remove()}var parentElement=$("#plist .gl-item").eq(pos),$j_sku_item=parentElement.find(".j-sku-item");0!=$j_sku_item.attr("alg")&&void 0!=$j_sku_item.attr("alg")?(parentElement.before(skuHtml.join("")),tiHuanYS.push(parentElement.html()),parentElement.remove()):parentElement.before(skuHtml.join("")),pListItem=_this.$plist.find(".gl-item")}if(remove_num&&(_this.gg_miss=_this.gg_miss+remove_num),_this.pListItem=_this.$plist.find(".j-sku-item"),pListItem=_this.$plist.find(".gl-item"),pListItem.length<60)for(var i=0;i<60-pListItem.length;i++)tiHuanYS[i]&&$("#plist .gl-warp").append('<li class="gl-item">'+tiHuanYS[i]+"</li>");_this.initPriceLimit(priceArr),_this.baseConf.kucun&&_this.get_stock(priceArr),_this.initAdWords(priceArr),_this.baseConf.chuxiaobq&&_this.initPromotionTag(priceArr),!_this.baseConf.dianpu||1!=tpl_type&&2!=tpl_type?_this.baseConf.dianpu&&_this.getDianPuInfoBySKU(priceArr):_this.getDianPuInfoBySKU(priceArr),_this.hand2Conf&&this.hand2ABVersion&&_this.initershou(priceArr),_this.initGGMissSkuSetPage()}}})},initGGMissSkuSetPage:function(){var a=this.gg_miss||params.ms||0;if(!(0>=a)){var b=$("#J_bottomPage .p-num a");b.length>0&&b.each(function(){var b=$(this).attr("href");/&ms=([0-9]+)?/.test(b)?$(this).attr("href",b.replace(/&ms=([0-9]+)?/,"&ms="+a)):$(this).attr("href",b+"&ms="+a)});var c=$("#J_topPage a ");c.each(function(){var b=$(this).attr("href");/&ms=([0-9]+)?/.test(b)?$(this).attr("href",b.replace(/&ms=([0-9]+)?/,"&ms="+a)):$(this).attr("href",b+"&ms="+a)})}},showGGItem:function(){if(this.guanggaoList.length>0){var a=$("#J_selector");var b=[];for(var c in this.guanggaoList){var d=this.guanggaoList[c];var e=d.exposal_url||"";e&&(b.push('<img src="'),b.push(e),b.push('&my=ggshow" style="display:none;">'))}a.prepend(b.join(""))}},appendExpands:function(a){if(a&&!(a.length<1)){var b=[];var c=!1;("coll.jd.com"==document.location.host||"fh.jd.com"==document.location.host)&&(c=!0);for(var d=0;d<a.length;d++){var e=a[d];var f=e.id;var g=e.name;var h=e.attr_infos;b.push('<div class ="J_selectorLine s-line J_selectorFold hide">'),b.push('<div class ="sl-wrap">'),b.push('<div class ="sl-key">'),c?(b.push('<span title="'),b.push(g),b.push('" >'),b.push(g),b.push("\uff1a</span>")):(b.push("<span >"),b.push(g),b.push("\uff1a</span>")),b.push("</div>"),b.push('<div class ="sl-value">'),b.push('<div class ="sl-v-list">'),b.push('<ul class ="J_valueList">');for(var i=0;i<h.length;i++){var j=h[i];var k=j.id;var l=j.name;var m=this.getExpandsUrl("ext",{extid:f,extValueId:k})+"&JL=3_"+g+"_"+l;b.push("<li>"),c?(b.push('<a href="'),b.push(m),b.push('" title="'),b.push(l),b.push('" rel="nofollow">')):(b.push('<a href="'),b.push(m),b.push('" rel="nofollow">')),b.push("<i></i>"),b.push(l),b.push("</a>"),b.push("</li>")}b.push("</ul>"),b.push("</div>"),b.push('<div class ="sl-btns">'),b.push('<a class ="btn btn-primary J_btnsConfirm disabled" href ="javascript:;" >\u786e\u5b9a</a>'),b.push('<a class ="btn btn-default J_btnsCancel" href ="javascript:;" > \u53d6\u6d88</a>'),b.push("</div>"),b.push("</div>"),b.push('<div class ="sl-ext">'),b.push(' <a class ="sl-e-more J_extMore" href ="javascript:;"  style="visibility: hidden;">\u66f4\u591a<i></i></a>'),b.push(' <a class ="sl-e-multiple J_extMultiple" href ="javascript:;" > \u591a\u9009<i></i></a>'),b.push("</div>"),b.push("</div>"),b.push("</div>")}$("#J_selectorMore").before(b.join(""))}},initExpands:function(){if(!("undefined"==typeof other_exts||other_exts.length<1)){for(var a=0;a<other_exts.length;a++){var b=[];var c=other_exts[a];{c.id}{c.name}var f=c.value_id;var g=c.value_name;if(f){var h=f.split(";");var i=g.split(";");for(var j=0;j<h.length;j++){var k=h[j];var l=i[j];b.push({id:k,name:l})}c.attr_infos=b,c.value_id="",c.value_name=""}}this.appendExpands(other_exts)}},initSpuItem:function(){var a=this;if(!("undefined"==typeof slaveWareList||this.mySKUArray1.length<1)){var b=this.mySKUArray1.concat(this.mySKUArray2);var c=$("ul.gl-warp",this.$plist);var d=c.find(".j-sku-item");function e(a){for(var b=0;b<d.length;b++)if(d.eq(b).attr("data-sku")==a)return d.eq(b)}for(var f in b)if(b.hasOwnProperty(f)){var g=b[f];var h=slaveWareList[g];var i=e(g);var j=i.attr("selfservice");var k=a.isPopRent(g,j);if("undefined"!=typeof h&&h.length>0)for(var f in h)if(h.hasOwnProperty(f)){var l=h[f];for(var m in l){k&&a.popRentSlaveItem.push(m);var w,x,n="",o="",p="",q="",r="",s=[],t="",u="",v=[];if(l.hasOwnProperty(m)){n=m,o=l[m].color,p=l[m].ids||"",q=l[m].imageUrl,r=n%5,t=l[m].comments||"",u=l[m].name||"",x=l[m].presell||"";var y="";y=""!=p?n+"|":n;{Number(f)+1}p&&p.indexOf(",")>-1&&(p=p.replace(/,/g,"|")),s.push('<li class="ps-item"  ids="'+y+p+'" ids_temp="'+y+p+'" > <a title="'+o+'" href="javascript:;" ><img data-sku='+n+' data-lazy-img="//img1'+r+".360buyimg.com/n9/"+q+'" width="25" height="25" class="loading-style2"></a></li>'),v=l[m].aos||[],w=l[m].xgzs||"",this.newConf.xuangouzs&&"0"==this.newConf.xuangouzs&&(w=""),this.slaveWareMap.put(n,{name:u,aos:v,zhishu:w}),"1"==x&&this.yushouSubItem.push(n)}}i.find("ul.ps-main").append(s.join(""))}}}},initaosItem:function(){if("undefined"!=typeof aosList){var a=baseURL||"";var b=this.getAttrValue("cat",a);var c=decodeURI(this.getAttrValue("ev",a));var d=window.location.pathname;var e=this.pListItem;for(var f=0,g=e.length;g>f;f++){var h=e.eq(f);var i=h.attr("data-sku");var j=aosList[i];if("undefined"!=typeof j&&j.length>0){var k=[];k.push('<span class="p-attribute">');for(var l in j)if(j.hasOwnProperty(l)){var m=j[l];var n=m.n;var o=m.v;if(c!=o){var p=d+"?cat="+b+"&ev="+o+"&JL=5_7_0";k.push('<a title="'),k.push(n),k.push('" href="'),k.push(p),k.push('" target="_blank" class="attr"><b>'),k.push(n),k.push("</b></a>")}}k.push("</span>");var q=$(".p-name",h);q.addClass("p-name-type3"),q.append(k.join(""));var r=this.slaveWareMap.get(i);r?r.aos=j:this.slaveWareMap.put(i,{aos:j})}}}},loadSlaveWare:function(){var a=[],b=[],c=[],d=[],e=[];var f=[],g=[],h=[],i=[],j=[];var k=this.slaveWareMap.keys();for(var l=0,m=k.length;m>l;l++){var n=k[l];this.popRentSlaveItem.join(",").indexOf(n)>-1||this.popRentItem.join(",").indexOf(n)>-1||(60>l?f.push(n):l>=60&&120>l?g.push(n):l>=120&&180>l?h.push(n):l>=180&&279>l?i.push(n):l>=280&&379>l&&j.push(n)),60>l?a.push(n):l>=60&&120>l?b.push(n):l>=120&&180>l?c.push(n):l>=180&&279>l?d.push(n):l>=280&&379>l&&e.push(n)}this.getSlavePriceLimit(f),this.getSlavePriceLimit(g),this.getSlavePriceLimit(h),this.getSlavePriceLimit(i),this.getSlavePriceLimit(j),this.baseConf.slave_com&&(this.getComments_salve(a),this.getComments_salve(b),this.getComments_salve(c),this.getComments_salve(d),this.getComments_salve(e)),this.baseConf.kucun&&(this.get_stock_slave(a),this.get_stock_slave(b),this.get_stock_slave(c),this.get_stock_slave(d),this.get_stock_slave(e)),this.baseConf.slave_ad&&(this.initAdWords_slave(a),this.initAdWords_slave(b),this.initAdWords_slave(c),this.initAdWords_slave(d),this.initAdWords_slave(e)),this.bindSpuHover()},bindSpuHover:function(){var a=this;this.$plist.delegate(".p-scroll .ps-item img","mouseenter",function(){var b=$(this).parents(".j-sku-item");var c=b.find(".J_price i");var d=b.find(".J_price");b.find(".p-price").attr("data-hiderealprice");var f=b.find(".p-stock");var g=b.find(".p-name>a em");var h=b.find(".p-commit strong a");var i=b.attr("data-sku_temp");var j=b.attr("selfservice");b.attr("data-hoverNum");var l=b.find(".p-name a");b.find(".p-commit .buy-score em");var n=b.find(".p-img");var o=b.find(".ps-item");if(o.length>1){var p=$(this).data("sku");var q=a.slaveWareMap.get(p);if(b.attr("data-active-sku",p),q){var r=a.selectedProvinceName;location.host==globalDomain&&selectedProvinceId&&iplocation[selectedProvinceId]&&(r=iplocation[selectedProvinceId].name);var s=a.yushouMap.get(p);if(s&&"2"==s.type?a.yushouCallback(s,p):("1"==b.attr("selfservice")||(b.find(".p-presell-time").remove(),b.find(".p-presell-stage").remove(),b.find(".p-price .hoverd").remove()),q.p&&(a.isPopRent(i,j)?d.html(q.p):c.html(q.p))),q.name){var t=g.find("img");g.find("img").length?(g.empty().html(q.name),g.prepend(t)):g.html(q.name)}q.comments&&h.html(q.comments);var u=q.stock;var v=q.spriceHtml?"spriceHtml":q.tkpriceHtml?"tkpriceHtml":"";switch(q.limit&&"1"==q.limit&&(u="1"),b.find(".price-plus-1").remove(),b.find(".price-zsj").remove(),v&&(b.find(".price-plus-1").remove(),b.find(".price-zsj").remove(),b.find(".J_price").after(q[v])),q.cuxiaoHtml&&a.isPriceFor618&&(location.host==listDomain||"list-chaoshi.jd.com"==location.host)&&a.baseConf.price17618?(n.find(".p-act-sign").remove(),n.append(q.cuxiaoHtml)):n.find(".p-act-sign").remove(),Number(u)){case 0:case 1:f.attr("style","display: "),f&&f.html(r+"\u6682\u4e0d\u652f\u6301\u914d\u9001"),f.attr({"data-stock_v":"1","data-stock_h":"1"});break;case 18:case 33:f.attr("style","display: none"),f.attr({"data-stock_v":"1","data-stock_h":"33"});break;case 34:f.attr("style","display: "),f&&f.html(r+"\u65e0\u8d27"),f.attr({"data-stock_v":"4","data-stock_h":"34"});break;case 36:var w="";f.attr("style","display: "),f&&f.html(r+"\u9884\u8ba2"+w),f.attr({"data-stock_v":"3","data-stock_h":"36"});break;case 39:f.attr({"data-stock_v":"2","data-stock_h":"39"});break;case 40:;var w="";f.attr({"data-stock_v":"5","data-stock_h":"40"}),f.attr("style","display: none")}var y=b.attr("data-soldoversea");if("coll.jd.com"!=location.host&&"fh.jd.com"!=location.host&&"lsit.jd.hk"!=location.host){32==selectedProvinceId&&2!=y&&3!=y&&6!=y&&7!=y&&b.find(".p-stock").show().html('<span class="st40">'+r+"\u6682\u4e0d\u652f\u6301\u914d\u9001</span>"),52993==selectedProvinceId&&1!=y&&3!=y&&5!=y&&7!=y&&b.find(".p-stock").show().html('<span class="st40">'+r+"\u6682\u4e0d\u652f\u6301\u914d\u9001</span>"),53283==selectedProvinceId&&4!=y&&5!=y&&6!=y&&7!=y&&b.find(".p-stock").show().html('<span class="st40">'+r+"\u6682\u4e0d\u652f\u6301\u914d\u9001</span>");var z=q.ad;if(z){var A=b.find(".p-img img");A.attr("title",z),l.attr("title",z);var B=b.find(".promo-words");B.html(z)}}var C=q.zhishu;if(C){var D='<span class="buy-score" title="\u4eac\u4e1c\u4e0e\u7b2c\u4e09\u65b9\u5408\u4f5c\u5bf9\u5546\u54c1\u6027\u80fd\u3001\u5b89\u5168\u6027\u3001\u5916\u89c2\u7b49\u8fdb\u884c\u7efc\u5408\u8bc4\u4f30\u5f97\u51fa\u9009\u8d2d\u6307\u6570">\u9009\u8d2d\u6307\u6570<em>'+C+"</em></span>";var E=b.find(".p-commit");b.find(".p-commit .buy-score").remove(),E.prepend(D)}else{var E=b.find(".p-commit");b.find(".p-commit .buy-score").remove()}var F=q.aos||[];if("undefined"!=typeof F&&F.length>0&&a.listaos){var G=[];var H=baseURL||"";var I=a.getAttrValue("cat",H);var J=decodeURI(a.getAttrValue("ev",H));var K=window.location.pathname;G.push('<span class="p-attribute">');for(var L in F)if(F.hasOwnProperty(L)){var M=F[L];var N=M.n;var O=M.v;if(J!=O){var P=K+"?cat="+I+"&ev="+O+"&JL=5_7_0";G.push('<a title="'),G.push(N),G.push('" href="'),G.push(P),G.push('" target="_blank" class="attr"><b>'),G.push(N),G.push("</b></a>")}}G.push("</span>");var E=$(".p-name",b);E.addClass("p-name-type3"),E.find(".p-attribute").remove(),E.append(G.join(""))}if(a.baseConf.beltEnable&&!b.attr("selfservice")){var Q=b.attr("data-sku")||0;var R=b.attr("venderid")||0;var S="";"undefined"!=typeof attrList&&attrList[Q]&&(S=attrList[Q].hasOwnProperty("mcat3Id")?attrList[Q].mcat3Id.toString():"");var T=$(this).attr("jdzy_shop_id")||0;var U="";if(""!=S){var V=0,W=0;"undefined"!=typeof attrList&&attrList[p]&&(V=attrList[p].hasOwnProperty("isCanUseDQ")&&1!=attrList[p].isCanUseDQ?1:2,W=attrList[p].hasOwnProperty("isOverseaPurchase")&&0!=attrList[p].isOverseaPurchase?2:1),U=p+"_"+V+"_"+W+","+S+","+R+","+T+";"}""==S||a.isPopRent(i,j)||a.getProductActivityInfo(U,"ps-item",Q)}}}})},trimNp:function(a){return!a||0>=a||"\u6682\u65e0\u62a5\u4ef7"==a?!1:(/(\.00)$/.test(a)&&(a=Number(a).toFixed(0)),a)},getSlavePriceLimit:function(a){var b=this;!a||a.length<1||seajs.use(["//misc.360buyimg.com/product/module/tools"],function(c){c.getPrice(a,this.price_pdos_off,function(a){if(a){var c=[];for(i=0;i<a.length;i++){if(!a[i].id)return!1;var d=a[i].id.replace("J_","");var e=a[i].p;var f=a[i].pp;var g=a[i].tpp;{a[i].np||{}}var j=a[i].up?a[i].up.split(",")[0].toLowerCase():"";var k=a[i].tkp||0;var l="";var m=b.slaveWareMap.get(d);(0>e||void 0==e||""==e)&&c.push(d),m&&(m.p=e>0?e:"\u6682\u65e0\u62a5\u4ef7",!b.baseConf.plus_price||0==params.gjz||"pp"!=j&&"tpp"!=j||(f>0?m.spriceHtml='<span class="price-plus-1" title="PLUS\u4f1a\u5458\u4e13\u4eab\u4ef7"><em>\xa5'+f+"</em><i></i></span>":!f&&g>0&&(m.spriceHtml='<span class="price-plus-1" title="PLUS\u4f1a\u5458\u4e13\u4eab\u4ef7"><em>\xa5'+g+"</em><i></i></span>")),"tkp"==j&&k>0&&(m.tkpriceHtml='<span class="price-zsj"><em>\xa5'+k+"</em><i></i></span>"),b.isPriceFor618&&(location.host==listDomain||"list-chaoshi.jd.com"==location.host)&&b.baseConf.price17618&&(m.cuxiaoHtml=l))
}if(c.length&&b.baseConf.no_price){c=c.join(",");var n=document.createElement("img");n.src="//"+interfaceDomain+"/lapi/price?skuids="+c}}},{ext:11e6,pin:decodeURIComponent(b.pin)})})},getSlavePrice:function(a){var b=this;if(a&&!(a.length<1)){var c="//p.3.cn/prices/mgets?";var d=this.area.join("_");var e={my:"list_price_slave",type:"1",area:d,source:"list_pc_front",skuIds:"J_"+a.join(",J_")};$.ajax({url:c,data:e,cache:!0,dataType:"jsonp",success:function(a){if(a)for(i=0;i<a.length;i++){if(!a[i].id)return!1;var c=a[i].id.replace("J_","");var d=a[i].p;var e=b.slaveWareMap.get(c);e&&(e.price=d>0?d:"\u6682\u65e0\u62a5\u4ef7")}}})}},get_stock_slave:function(a){var b=this;if(!(a.length<1)){var c=this.area;c.length<4&&c.push(0);var d="//ss.3.cn/ss/areaStockState/mget?";var e={app:"list_pc",ch:"1",area:c.join(","),skuNum:a.join(";"),pdpin:b.pin,pduid:b.uuid};$.ajax({url:d,data:e,cache:!0,dataType:"jsonp",success:function(a){if(a)for(var c in a){var d=a[c];var e=b.slaveWareMap.get(c);e&&(e.stock=d.a)}}})}},initAdWords_slave:function(a){var b=this;if(a&&!(a.length<1)){var c="//ad.3.cn/ads/mgets?";var d={my:"list_adWords",source:"JDList",skuids:"AD_"+a.join(",AD_")};$.ajax({url:c,data:d,cache:!0,dataType:"jsonp",success:function(a){if(a)for(i=0;i<a.length;i++){var c=a[i].id.replace("AD_","");if(c){var d=b.strip_tags(a[i].ad);var e=b.slaveWareMap.get(c);e&&(e.ad=d)}}}})}},initSearchReslut:function(){var a="\u5728\u5f53\u524d\u5206\u7c7b\u4e2d\u641c\u7d22";var b=function(b){var c=$.trim(b.val());""!=c&&c!=a&&(window.location.href=window.location.href.replace(/(^|\\?|&)ev=([^&#]*)/g,"").replace(/(^|\\?|&)go=([^&#]*)/g,"")+"&sir_key="+encodeURIComponent(c))};$("#resultSearchBtn2").click(function(){b($(this).prev())}).prev().focus(function(){$.trim($(this).val())==a&&$(this).val("")}).blur(function(){""==$.trim($(this).val())&&$(this).val(a)}).keydown(function(a){13==a.keyCode&&b($(this))}),$("#colseResultSearchBtn2").click(function(){window.location=window.location.href.replace(/(^|\\?|&)sir_key=([^&#]*)/g,"")})},initDaogou:function(){var a=this;$("#tip-main ul li").click(function(){var c=$(this).attr("data-id");var d=$(this).find("em").html();$(this).attr("class")?($(this).attr("class",""),a.daogouMap.remove(c)):($(this).addClass("selected"),a.daogouMap.put(c,d)),a.daogouMap.size()>0?$("#btn-match").addClass("btn-match-active"):$("#btn-match").removeClass("btn-match-active")}),$("#btn-match").click(function(){if(a.daogouMap.size()>0){var c=a.daogouMap.keys().join(",");var d=a.daogouMap.values().join("|");var e=baseURL||"";window.location=window.location.pathname+"?cat="+a.getAttrValue("cat",e)+"&gui="+c+"&JL=4_20_"+d}}),$("#guide-main ul li").click(function(){var c=$(this).attr("data-id");var d=$(this).find("em").html();var e=baseURL||"";var f=a.getAttrValue("ev",e);return f?void(window.location=window.location.pathname+"?&ev="+f+"&cat="+a.getAttrValue("cat",e)+"&gui="+c+"&JL=4_20_"+d):void(window.location=window.location.pathname+"?cat="+a.getAttrValue("cat",e)+"&gui="+c+"&JL=4_20_"+d)}),seajs.use(["jdf/1.0.0/ui/tips/1.0.0/tips"],function(){$(".guide-option li").tips({tipsClass:"ui-tips-guide1",type:"hover",align:["top","left"],hasClose:!1}),$(".guide-recommend .label").tips({tipsClass:"ui-tips-guide2",type:"hover",align:["top","left"],hasClose:!1})})},get_stock:function(a){var b=this;if(!(a.length<1)){var c=this.area;c.length<4&&c.push(0);var d="//ss.3.cn/ss/areaStockState/mget?";var e={app:"list_pc",ch:"1",area:c.join(","),skuNum:a.join(";"),pdpin:b.pin,pduid:b.uuid};$.ajax({url:d,data:e,cache:!0,dataType:"jsonp",success:function(a){a&&b.get_stock_cb(a)}})}},get_stock_cb:function(a){var b=this;var c=[];if(a&&"object"==typeof a){var e=b.selectedProvinceName;location.host==globalDomain&&selectedProvinceId&&iplocation[selectedProvinceId]&&(e=iplocation[selectedProvinceId].name);var f=$("#plist").find(".j-sku-item");var g=[];for(var h=0,i=f.length;i>h;h++){var j=f.eq(h);var k=j.attr("data-sku");var l=j.attr("data-soldoversea");var m=j.attr("is_parallel_stock")||"0";var n=a[k],o="p-o-btn notification J_notification";if(n){var p=$(".p-stock",j);var q=n.l||0;var r=n.j||"";var s=j.attr("selfservice");var t=j.attr("data-lowestbuy")||-1;var u=n.c;"0"==this.gjz&&"34"==n.a&&($(".p-addcart",j).attr("style","display: none"),$(".p-commit-n",j).attr("style","display: none"));var v=p.attr("limit")||"0";if("1"==v){var w="\u6682\u4e0d\u652f\u6301\u914d\u9001";p.attr("style","display: "),p&&p.html('<span class="st40">'+e+w+"</span>"),p.attr({"data-stock_v":"1","data-stock_h":"1"}),c.push(j)}else switch(Number(n.a)){case 0:case 18:case 33:if(p.attr("style","display: none"),p.attr({"data-stock_v":"1","data-stock_h":"33"}),t>1){var x=$("a.addcart",j);-1!=u&&t>u?x.attr({href:"javascript:;","data-type":2,"data-sku":k,id:"store"+k}).addClass(o).removeAttr("target").html("<i></i>\u5230\u8d27\u901a\u77e5"):x.html("<i></i>"+t+"\u4ef6\u8d77\u552e")}g.push({skuId:k,d:n.d,e:n.e});break;case 34:var x=$("a.addcart",j);p.attr("style","display: "),x.attr({href:"javascript:;","data-type":2,"data-sku":k,id:"store"+k}).addClass(o).removeAttr("target").html("12360"==params.thirdCatId?"<i></i>\u65e0\u6cd5\u914d\u9001":"<i></i>\u5230\u8d27\u901a\u77e5"),p&&p.html(e+"\u65e0\u8d27"),p.attr({"data-stock_v":"4","data-stock_h":"34"}),c.push(j);break;case 36:var w="";p.attr("style","display: "),r&&""!=r&&"2"!=s&&"1"!=s?w="  \u9884\u8ba1"+r+"\u65e5\u540e\u6709\u8d27":params.istsyx&&"2"==q&&(w=" \u4e0b\u5355\u540e7-9\u5468\u53d1\u8d27"),p&&p.html(e+"\u9884\u8ba2"+w),p.attr({"data-stock_v":"3","data-stock_h":"36"});break;case 39:p.attr({"data-stock_v":"2","data-stock_h":"39"});break;case 40:var y=!1;var w="";"1"!=m&&params.istsyx&&"2"==q&&(w="\u4e0b\u5355\u540e5-10\u5929\u53d1\u8d27",y=!0),p.attr({"data-stock_v":"5","data-stock_h":"40"}),y&&(p.attr("style","display: "),p&&p.html('<span class="st40">'+e+"\u6709\u8d27 <b>"+w+"</b></span>"))}32==selectedProvinceId&&2!=l&&3!=l&&6!=l&&7!=l&&p.show().html('<span class="st40">'+e+"\u6682\u4e0d\u652f\u6301\u914d\u9001</span>"),52993==selectedProvinceId&&1!=l&&3!=l&&5!=l&&7!=l&&p.show().html('<span class="st40">'+e+"\u6682\u4e0d\u652f\u6301\u914d\u9001</span>"),53283==selectedProvinceId&&4!=l&&5!=l&&6!=l&&7!=l&&p.show().html('<span class="st40">'+e+"\u6682\u4e0d\u652f\u6301\u914d\u9001</span>")}}setTimeout(function(){jdList.spuRepacle(c)},500),1==b.delivery_211||params.istsyx||location.host!=listDomain||params.is_tid||!b.baseConf.local_icon||b.getLocalStoreICON(g)}},getLocalStoreICON:function(a){if(a.length){var b={area:"",skus:""},c="//"+interfaceDomain+"/promise/promiseData.action";if(this.area){b.area=this.area.join("-");var d=[],e=0,f=0;for(var g=0;g<a.length;g++){var h=a[g].skuId;attrList[h]&&(e=attrList[h].w||0,f=attrList[h].fr||0,d.push(h+"_"+a[g].d+"_"+a[g].e+"_"+e+"_"+f))}b.skus=d.join(",")}$.ajax({url:c,data:b,cache:!0,dataType:"jsonp",success:function(a){if(a.success&&a.data.length){var b=$("#plist");for(var c=0;c<a.data.length;c++){var d=a.data[c].skuId;var e=a.data[c].markDataList[0];if(1==e)if("list.jd.hk"==location.host){var f=b.find(".j-sku-item[data-sku="+d+"]");var g='<i class="js-local-store goods-icons J-picon-tips" data-tips="<div class=&quot;picon-tips&quot;><i class=&quot;goods-icons&quot;>\u672c\u5730\u4ed3</i><em>\u4ece\u60a8\u6240\u5728\u57ce\u5e02\u7684\u4eac\u4e1c\u4ed3\u5e93\u53d1\u8d27\uff0c\u5f53\u65e5\u4e0a\u534811:00\u524d\u63d0\u4ea4\u7684\u73b0\u8d27\u8ba2\u5355\uff0c\u5f53\u65e5\u9001\u8fbe\uff1b\u5f53\u65e523:00\u524d\u63d0\u4ea4\u7684\u73b0\u8d27\u8ba2\u5355\uff0c\u6b21\u65e515:00\u524d\u9001\u8fbe</em></div>">\u672c\u5730\u4ed3</i>';var h=f.find(".J-pro-icons");h.find("#js-jdzy").length?h.find("#js-jdzy").last().after(g):h.find("#js-jdps").length?h.find("#js-jdps").last().after(g):h.find("img").length?h.find("img").last().after(g):h.prepend(g)}else{var f=b.find(".j-sku-item[data-sku="+d+"]");var h=f.find(".p-icons");appendIcon2Page(h,4,'<i class="icon-group-4 goods-icons J-picon-tips" data-tips="\u4ece\u60a8\u6240\u5728\u57ce\u5e02\u7684\u4eac\u4e1c\u4ed3\u5e93\u53d1\u8d27\uff0c\u5f53\u65e5\u4e0a\u534811:00\u524d\u63d0\u4ea4\u7684\u73b0\u8d27\u8ba2\u5355\uff0c\u5f53\u65e5\u9001\u8fbe\uff1b\u5f53\u65e523:00\u524d\u63d0\u4ea4\u7684\u73b0\u8d27\u8ba2\u5355\uff0c\u6b21\u65e515:00\u524d\u9001\u8fbe">\u672c\u5730\u4ed3</i>')}}}}})}},spuRepacle:function(a){var b=this.getAttrValue("spu",location.href)||"0";var c="1"==this.newConf.spureplace||!1;if("0"==b&&c){var d=[];var e=a.length;if(e>0&&this.isSpuRepalce<=15){this.isSpuRepalce++;for(var f=0;e>f;f++){var g=a[f];{g.attr("data-sku")}var i=$("li.ps-item",g);for(var j=0;j<i.length;j++){var k=$(i[j]).attr("ids");if("undefined"!=typeof k&&""!=k){var l=k.split("|");var m=l[0];$(i[j]).attr("ids",l.slice(1,l.length).join("|"));var n=$(".p-img a",g);var o="//item.jd.com/"+m+".html";"1"==params.delivery&&(o+="?dist=jd"),n.attr("href",o),g.attr("data-sku",m);var p=$("a img",i[j]);if($(p).attr("data-sku",m),j>0){$(i[0]).before($(i[j]));var q=$(p).attr("data-lazy-img");if(q){"done"==q&&(q=$(p).attr("src"));var r=$(".p-img a img",g);var s=r.attr("data-lazy-img");var t="/n7";params&&"1"==params.paragraph_tpl_type&&(t="/n8"),"done"==s?r.attr("src",q.replace("/n9",t)):r.attr("data-lazy-img",q.replace("/n9",t))}var u=this.slaveWareMap.get(m);if(u){var v=g.find(".p-price").attr("data-hiderealprice");var w=g.find(".J_price i");var x=g.find(".p-name em");var y=g.find(".p-commit strong a");u.p&&w.html(1==v?"\u5f85\u53d1\u5e03":u.p>0?u.p:"\u6682\u65e0\u62a5\u4ef7"),u.name&&x.html(u.name),u.comments&&y.html(u.comments);var z=u.zhishu;if(z){var A='<span class="buy-score" title="\u4eac\u4e1c\u4e0e\u7b2c\u4e09\u65b9\u5408\u4f5c\u5bf9\u5546\u54c1\u6027\u80fd\u3001\u5b89\u5168\u6027\u3001\u5916\u89c2\u7b49\u8fdb\u884c\u7efc\u5408\u8bc4\u4f30\u5f97\u51fa\u9009\u8d2d\u6307\u6570">\u9009\u8d2d\u6307\u6570<em>'+z+"</em></span>";var B=g.find(".p-commit");g.find(".p-commit .buy-score").remove(),B.prepend(A)}else{var B=g.find(".p-commit");g.find(".p-commit .buy-score").remove()}}}var B=$(".p-stock",g);B.attr({"data-stock_v":"6","data-stock_h":"33",limit:"0"}),B.attr("style","display: none"),d.push(m);break}}}this.pListItem=this.$plist.find(".j-sku-item"),this.baseConf.kucun&&this.get_stock(d)}}},getComments_salve:function(a){var b=this;a.length>0&&$.ajax({url:"//club.jd.com/comment/productCommentSummaries.action?my=pinglun2&referenceIds="+a.join(","),dataType:"jsonp",success:function(a){if(!a&&!a.CommentsCount.length)return!1;var c=a.CommentsCount;for(i=0;i<c.length;i++){var d=c[i].SkuId;var e=c[i].CommentCountStr;var f=b.slaveWareMap.get(d);f&&(f.comments=e)}}})},getComments:function(a){var b=this;a.length>0&&$.ajax({url:"//club.jd.com/comment/productCommentSummaries.action?my=pinglun&referenceIds="+a.join(","),dataType:"jsonp",success:function(a){if(!a&&!a.CommentsCount.length)return!1;var c=a.CommentsCount;var d=new Map;for(h=0;h<c.length;h++){var e=c[h].SkuId;var f=c[h].CommentCountStr;d.put(e,f)}var g=b.pListItem;for(var h=0,i=g.length;i>h;h++){var j=g.eq(h);var k=j.attr("data-sku");var l=d.get(k);var m="";if(l){var n=$(".p-commit",j);var o=$(".comment",j);var p="//item.jd.com/"+k+".html";0==o.length&&(m=0==params.gjz?"1"==params.delivery?'<a class="comment" target="_blank" href="'+p+'?dist=jd#comment"><i></i>'+l+"</a>":'<a class="comment" target="_blank" href="'+p+'#comment"><i></i>'+l+"</a>":"1"==params.delivery?'<strong>\u5df2\u6709<a class="comment"  target="_blank" href="'+p+'?dist=jd#comment">'+l+"</a>\u4eba\u8bc4\u4ef7</strong>":'<strong>\u5df2\u6709<a class="comment"  target="_blank" href="'+p+'#comment">'+l+"</a>\u4eba\u8bc4\u4ef7</strong>"),n.prepend(m)}}}})},getEBOOKBySKU_BOOK:function(a){var b=this;a.length>0&&$.ajax({url:"//gw-e.jd.com/forBookCode/forBookCode_getBathEbookIdForJs.action?my=ebook&bookCode="+a.join(","),dataType:"jsonp",success:function(a){if(!a&&!a.length)return!1;if("0"==a.code)return!1;var c=new Map;var d=a.info;var e=[];for(var f=0;f<d.length;f++){var g=d[f];var h=g.bookCode;var i=g.yn||0;1==i&&(c.put(h,g),e.push(g.ebookId))}var j=b.pListItem;for(var k=0,l=j.length;l>k;k++){var m=j.eq(k);var h=m.attr("data-sku");var n=c.get(h);if(n){var o=n.ebookId;m.attr("data-sku-e",o);var p=$(".p-operate",m);var q='<a class="p-o-btn ebookbuy" target="_blank" href="//item.jd.com/'+o+'.html"><i></i><span class="text">\u7535\u5b50\u4e66</span><em class="J_price_ebook"></em></a>';p.append(q)}}b.initPriceLimit_ebook(e)}})},getBOOKByEBOOK:function(a){var b=this;a.length>0&&$.ajax({url:"//gw-e.jd.com/forBookCode/forBookCode_getBathPaperBookIdForJs.action?my=ebook2&bookCode="+a.join(","),dataType:"jsonp",success:function(a){if(!a&&!a.length)return!1;if("0"==a.code)return!1;var c=a.resultList;for(var d=0;d<c.length;d++){var e=c[d];var f=e.bookCode;var g=e.ebookId;var h=e.yn||0;1==h&&f&&(e.isUsd=!1,b.ebookZhishuMap.put(g,e))}b.ebookAjaxNum++,b.buildEbookInfo()}})},getShiduChangduByEBOOK:function(a){var b=this;a.length>0&&$.ajax({url:"//cread.jd.com/readask/canReadForJSONP.action?my=ebook3&bookIds="+a.join(","),dataType:"jsonp",success:function(a){if(!a&&!a.Msg)return!1;if("-1"==a.Msg.code)return!1;var d=a.List;for(var e=0;e<d.length;e++){var f=d[e];var g=f.wareId;g&&(f.isUsd=!1,b.ebookShiduMap.put(g,f))}b.ebookAjaxNum++,b.buildEbookInfo()}})},buildEbookInfo:function(){if(this.ebookAjaxNum==this.ebookAjaxCount){var a=this.pListItem;for(var b=0,c=a.length;c>b;b++){var d=a.eq(b);var e=d.attr("data-sku");var f="",g="",h="";var i=this.ebookZhishuMap.get(e);if(i&&!i.isUsd){var j=i.bookCode;i.isUsd=!0,d.attr("data-sku-z",j),f='<a class="p-o-link paperbook" target="_blank" href="//item.jd.com/'+j+'.html"><i></i><em class="text">\u7eb8\u4e66\u8d2d\u4e70</em><em class="J_price_ebook"></em></a>'}var k=this.ebookShiduMap.get(e);if(k&&!k.isUsd){k.isUsd=!0;var l=k.isFluentRead;var m=k.isRead;m&&(g='<a class="p-o-btn freeread" target="_blank" href="//cread.jd.com/read/startRead.action?bookId='+e+'&readType=1"><i></i><em class="text">\u5728\u7ebf\u8bd5\u8bfb</em><em class="J_price_ebook"></em></a>'),l&&(h='<a class="p-o-btn vipread" href="javascript:void(0);"><i></i><em class="text">\u5728\u7ebf\u7545\u8bfb</em><em class="J_price_ebook"></em></a>')}var o,n=g+h;n&&(o=$(".p-operate",d),o.prepend(n)),f&&(o=$(".p-operate",d),o.append(f))}this.buildOnclick()}},buildOnclick:function(){var a=this;a.$plist.delegate(".vipread","click",function(){var c=$(this).parents(".j-sku-item").attr("data-sku");a.openEBookVipDialog(c)}),a.$plist.delegate(".download","click",function(){var c=$(this).parents(".j-sku-item").attr("data-sku");a.openFreeEBookDialog(c)})},openEBookVipDialog:function(a){seajs.use("jdf/1.0.0/unit/login/1.0.0/login.js",function(b){b({modal:!0,complete:function(){window.location.href="//cread.jd.com/read/startRead.action?bookId="+a+"&readType=0"}})})},openFreeEBookDialog:function(a){var b='        <div class="bookLayer">            <p>\u8bf7\u4f7f\u7528<b>\u4eac\u4e1c\u9605\u8bfb\u5ba2\u6237\u7aef</b>\u4e0b\u8f7d\u9605\u8bfb</p>            <div class="btn-wrap">                <a href="//sale.jd.com/act/W5hugLDc1R.html" class="p-o-btn"  target="_blank">\u7acb\u5373\u5b89\u88c5</a>                <a href="LEBK:///Bought" class="p-o-btn" >\u542f\u52a8\u5ba2\u6237\u7aef</a>            </div>        </div>';seajs.use("jdf/1.0.0/unit/login/1.0.0/login.js",function(c){c({modal:!0,complete:function(c){var d;null!=c&&null!=c.Identity.IsAuthenticated&&c.Identity.IsAuthenticated&&$.ajax({url:"//gw.e.jd.com/downrecord/downrecord_insert.action?ebookId="+a,dataType:"jsonp",cache:!0,success:function(a){1==a.code?d=$("body").dialog({width:442,height:120,title:"\u6e29\u99a8\u63d0\u793a",type:"html",source:b}):0==a.code&&alert("\u7cfb\u7edf\u9519\u8bef\uff0c\u7a0d\u540e\u518d\u8bd5")}})}})})},setLogJL:function(){var a=decodeURI(this.getAttrValue2("JL",location.href));if("null"!=a&&""!=a){var b=params.abTestFlag;var c=a.split("_");6==c[0]?log("search","list",location.href,params.thirdCatId,c[0],params.pageNo,b):7==c[0]?log("search","list",location.href,params.thirdCatId,c[0],encodeURIComponent(c[1]),b):4==c[0]?log("search","list",location.href,params.thirdCatId,c[0],encodeURIComponent(c[1]),b):log("search","list",location.href,params.thirdCatId,c[0],encodeURIComponent(c[1]),encodeURIComponent(c[2]),b)}},setJLSKU:function(){var a=this.mySKUArray1;var b=params.abTestFlag;a.length>0&&log("search","list",location.href,params.thirdCatId,0,a.join("-"),b,0);var c=this.mySKUArray2;c.length>0&&log("search","list",location.href,params.thirdCatId,0,c.join("-"),b,0);var d=this.ggSKUMap.keys();d.length>0&&log("search","list",location.href,params.thirdCatId,0,d.join("-"),b,-1);var e=this.gexinghSKUMap.keys();e.length>0&&log("search","list",location.href,params.thirdCatId,0,e.join("-"),b,this.alg)},dopv_stock:function(){var a=this,b=[];var c=a.pListItem;for(var d=0,e=c.length;e>d;d++){var f=c.eq(d);var g=f.attr("data-sku");var h=$(".J_price i",f);h=h.text().replace("\xa5",""),"\u6682\u65e0\u62a5\u4ef7"==h&&(h=-1);var i=$(".p-stock",f);var f=[];f.push(Number(g)),f.push(Number(h)),f.push(Number(i.attr("data-stock_v"))),f.push(Number(i.attr("data-stock_h"))),f.push(Number(i.attr("data-isdeliveryable"))),b.push(f)}b.length>0&&(logJSON("pv_stock","list",{area:this.area.join("_"),sku:b.slice(0,30)}),b.length>30&&logJSON("pv_stock","list",{area:this.area.join("_"),sku:b.slice(30,60)}))},onPriceChange:function(a){1==a.stock&&(this.stockFlag=!0),0==a.stock&&(this.priceFlag=!0),2==a.stock&&(this.wljsloadFlag=!0),this.priceFlag&&this.stockFlag&&this.wljsloadFlag&&this.dopv_stock()},initGoogletagmanager:function(){var a=params.exp_brand;params.firstCatId;params.secondCatId;params.thirdCatId;var e=null;a&&"0"!=a&&(e=a);dataLayer=[{google_tag_params:window.google_tag_params}],function(a,b,c,d,e){a[d]=a[d]||[],a[d].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var f=b.getElementsByTagName(c)[0],g=b.createElement(c),h="dataLayer"!=d?"&l="+d:"";g.async=!0,g.src="//www.googletagmanager.com/gtm.js?id="+e+h,f.parentNode.insertBefore(g,f)}(window,document,"script","dataLayer","GTM-T947SH")},getProductActivityInfo:function(a,b,c){var d=this;$.ajax({url:"//ad.3.cn/wbs/mgets",dataType:"jsonp",data:{search:a,source:"list.jd.com"},success:function(e){if("gl-item"==b)0!=e.length&&$.each(e,function(a,b){d.activityInfo.push(b)});else if("ps-item"==b){var f=a.split("_")[0]||"";d.getProductRealtimePrices(f,e[0],c)}},error:function(a){console.log("//ad.3.cn/wbs/mgets have some error"),console.log(a)}})},getProductRealtimePrices:function(a,b,c){var d=this;$.ajax({url:"//p.3.cn/prices/mgets",dataType:"jsonp",data:{skuids:"J_"+a.toString(),area:"",type:"1",ext:"11000000",source:"list_pc_front"},success:function(a){if(a)for(var e=0;e<a.length;e++){if(!a[e].id)return!1;var f=$("[data-sku='"+c+"']").eq(0);f.find(".p-presell-time")[0]||d.businessForHaveActivityInfo(b,a[0],f)}},error:function(){console.log("/p.3.cn/prices/mgets have some error")}})},beltInit:function(){var a=this;if(a.baseConf.beltEnable){var b=0,c=0;for(b=0;b<a.activityInfo.length;b++)for(c=0;c<a.adPrice.length;c++)if(a.activityInfo[b].skuId!==a.adPrice[c].sku);else{var d=$("div[data-sku='"+a.activityInfo[b].skuId+"']").eq(0);!d.attr("selfservice")&&a.popRentItem.join(",").indexOf(a.activityInfo[b].skuId)<=-1&&a.businessForHaveActivityInfo(a.activityInfo[b],a.adPrice[c],d)}}},businessForHaveActivityInfo:function(a,b,c){var d=this;var e=a.result||{};var f=d.checkActivityInfoAPIData(e);f?d.businessForControlBeltImg(!0,b,e,c):d.businessForControlBeltImg(!1,b,e,c)},businessForControlBeltImg:function(a,b,c,d){var e=this;var f=b||{};var g=b.np||{};var h=e.formatDate(g.s);var i=e.formatDate(g.e);var j=e.formatDate(c.start);var k=e.formatDate(c.end);e.formatDate(c.forecast);var m=e.checkRealtimePricesAPIData(f);if(m)if(a)if(h===j&&i===k){var n=e.setBeltImg(c,d,!1);var o=e.setPriceImg(f,d,!1);var p='<div class="p-act-sign sign-20180201" style="background-image: url('+n.beltPriceBg+');"><div class="p-act-sign sign-2017083101"><div class="sign-title">'+n.activityContent+'</div></div><div class="p-act-sign sign-2017083102"><div class="sign-title">'+o.priceTilt+'</div><div class="sign-price"><i>\xa5</i><strong>'+o.price+'</strong></div><div class="sign-date">'+o.showData+"</div></div></div>";d.find(".p-img").children("a").append(p)}else e.setBeltImg(c,d,!0);else e.setPriceImg(f,d,!0);else a&&e.setBeltImg(c,d,!0)},setBeltImg:function(a,b,c){var d=this;d.hiddenSomeIcon(b);var e="";a.actionName.substring(0,8)||"";var g=a.content||"";d.formatDate(a.start)||"";d.formatDate(a.end)||"";var j=d.isSameDay(a.start,a.end);var k="//img20.360buyimg.com/uba/jfs/t9394/87/417297612/5577/e02809c0/59a7f889Naef0f771.png";var l=a&&a.url&&a.url.split(",");if(l instanceof Array&&(k=l[1]||"//img20.360buyimg.com/uba/jfs/t9394/87/417297612/5577/e02809c0/59a7f889Naef0f771.png",beltPriceBg=l[5]||"//img10.360buyimg.com/uba/jfs/t16834/185/413059478/3022/ccad990/5a71d243Nb2e7e980.png"),!c){var m={beltPriceBg:beltPriceBg,activityContent:g};return m}e='<div class="p-act-sign sign-2017083101" style="background-image: url('+k+');">    <div class="sign-title ac">'+g+'<span class="sign-date">('+j+")</span></div></div>",b.find(".p-img").children("a").append(e)},setPriceImg:function(a,b,c){var d=this;var e=a.np;d.hiddenSomeIcon(b);var f=e.c||"";var g="";d.formatDate(e.s)||"";d.formatDate(e.e)||"";var j=d.isSameDay(e.s,e.e);"1"==e.t?g=parseFloat(e.p.substring(0,6))||0:"2"==e.t&&(g=parseFloat(a.p.substring(0,6))||0);var k="";var l="//img12.360buyimg.com/uba/jfs/t9136/237/458518544/3881/195c4a75/59a8c96aN6747adcd.png",m="//img11.360buyimg.com/uba/jfs/t7891/225/2098399816/3539/3b0d617d/59a8c968Naa36d5a2.png",n="",o="";var p=parseInt(utils.formatTimeStr(params.serverTime).getTime()/1e3)||parseInt((new Date).getTime()/1e3);if(p>=1516204800&&1519315199>=p&&(l="//img30.360buyimg.com/devfe/jfs/t16786/27/159268890/3751/c8a21283/5a608553N1e85f600.png",m="//img13.360buyimg.com/devfe/jfs/t18001/7/164435337/3124/dc9c7ac3/5a609f61Nd12699a3.png",n="left:133px;color:#da2c2c;",o="left:136px;color:#da2c2c;"),!c){var q={priceTilt:f,price:g,showData:j};return q}k='<div class="p-act-sign sign-2017083103" style="'+n+"background-image: url("+l+');">';var r=k+'     <div class="sign-title">'+f+'</div>     <div class="sign-price">          <i>\xa5</i><strong>'+g+'</strong>     </div>     <div class="sign-date">'+j+"</div></div>";b.find(".p-img").children("a").append(r)},hiddenSomeIcon:function(a){var b=a.find(".p-img").children("a").children(".p-service-mask");b[0]&&b.hide()},formatDate:function(a){if(a){a=parseInt(a.toString().substring(0,10));var b=new Date(1e3*a);var c=b.getMonth()+1;var d=b.getDate();return c+"."+d}},isSameDay:function(a,b){if(a&&b){var c="";var d=parseInt(a.toString().substring(0,10));var e=parseInt(b.toString().substring(0,10));var f=e-d;var c="";var g=new Date(1e3*d);var h=new Date(1e3*e);var i=h.getMonth()+1;var j=h.getDate();var k=h.getHours();var l=h.getMinutes();{h.getSeconds()}var n=g.getMonth()+1;var o=g.getDate();return 86459>=f?(0==k&&0==l&&(j-=1),n===i&&o===j&&(c=n+"\u6708"+o+"\u65e5")):c=n+"."+o+"-"+i+"."+j,c}},checkActivityInfoAPIData:function(a){return a&&a.hasOwnProperty("start")&&a.start&&a.hasOwnProperty("end")&&a.end&&a.hasOwnProperty("forecast")&&a.forecast?parseInt(a.start)>parseInt(a.end)||parseInt(a.forecast)>parseInt(a.start)?!1:!0:!1},checkRealtimePricesAPIData:function(a){var b=a.np||{};return a&&a.hasOwnProperty("p")&&a.p&&parseFloat(a.p)>0?b.hasOwnProperty("t")&&"1"==b.t&&b.hasOwnProperty("s")&&b.s&&b.hasOwnProperty("e")&&b.e&&b.hasOwnProperty("p")&&b.p?(b.p=b.p||0,parseInt(b.s)>parseInt(b.e)&&parseFloat(b.p)<=0?!1:!0):b.hasOwnProperty("t")&&"2"==b.t&&b.hasOwnProperty("s")&&b.s&&b.hasOwnProperty("e")&&b.e?parseInt(b.s)>parseInt(b.e)?!1:!0:void 0:!1}}}();var jaq=jaq||[];var jdList=new JD.JDList;jdList.init(),setInterval("jdList.showYushouTime()",1e3),window.onload=function(){jdList.beltInit()};
!function(){function b(){var a=[];return params?params.firstCatId?(a.push(params.firstCatId),params.secondCatId?(a.push(params.secondCatId),params.thirdCatId?(a.push(params.thirdCatId),a.join(",")):a.join(",")):a.join(",")):"":""}var c=b(),d="//cds.3.cn/hotwords/get";var e={cate:c};params.tid&&(e={cate:params.tid,type:"vc"}),c&&$.ajax({url:d,data:e,cache:!0,dataType:"jsonp",success:function(a){var b="",c="";if(a&&0!=a.length){a.sort(function(a,b){return a.order-b.order});for(var d=0;d<a.length;d++)0!=d?d>9||(b+='<a id="'+a[d].id+'" data-position-id="'+d+'" target="_blank" href="'+a[d].url_info+'">'+a[d].name+"</a>"):(c=a[d].name,$("#key").val(c).bind("focus",function(){this.value==c&&(this.value=""),$(this).addClass("defcolor").removeClass("blurcolor")}).bind("blur",function(){""==this.value&&(this.value=c),$(this).addClass("blurcolor").removeClass("defcolor")}));$("#search-2014 #key").addClass("blurcolor"),$("#hotwords").empty().append("<strong>\u70ed\u95e8\u641c\u7d22\uff1a</strong>"+b+'<span class="clr"></span>'),$("#hotwords").delegate("a","click",function(){var a=$(this);window.log&&window.log("hotWord","cmsPortal","hotWord_"+a.attr("id"),a.text(),a.data("positionId"))})}}})}(window);