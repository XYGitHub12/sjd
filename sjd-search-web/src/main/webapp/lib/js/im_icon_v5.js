function jdim(){function e(){var e=null;return a.shopId?e="shopId="+a.shopId:a.venderId?e="venderId="+a.venderId:a.brandName?(e="brandName="+encodeURIComponent(encodeURIComponent(a.brandName)),a.rank3&&(e=e+"&rank3="+a.rank3)):a.pid?e="pid="+a.pid:a.virtualId&&(e="virtualId="+a.virtualId),a.from&&(e=e+"&from="+a.from),e}function t(){var t=e();if(t){var s=l;a.domain&&(s=a.domain);var n="//"+s+"/api/checkChat?"+t+"&callback=?"+(a.charset?"&returnCharset="+a.charset:"");jQuery.getJSON(n,i)}}function i(e){if(e&&e.code){var t=e.code,i=e.seller,n=s(t);if(1==t){var r="在线客服";a.onlineTxt&&a.onlineStyle&&(r=decodeURIComponent(a.onlineTxt));var l=r;a.onlineTip&&a.onlineStyle&&(l=decodeURIComponent(a.onlineTip)),$("."+n).each(function(){a.showSeller===void 0||a.showSeller?$(this).html("<b><a href='javascript:;'>"+r+"</a></b>").attr("title",i+" "+l):$(this).html("<b><a href='javascript:;'>"+r+"</a></b>").attr("title",l),$(this).click(function(){o(t,e)})})}else if(2==t){var r="";a.offlineTxt&&a.offlineStyle&&(r=decodeURIComponent(a.offlineTxt));var h="在线客服不在线，请稍候咨询";a.offlineTip&&a.offlineStyle&&(h=decodeURIComponent(a.offlineTip)),$("."+n).each(function(){a.showSeller===void 0||a.showSeller?$(this).html("<b>"+r+"</b>").attr("title",i+" "+h):$(this).html("<b>"+r+"</b>").attr("title",h)})}else if(3==t){var c="";a.leaveTxt&&a.offlineStyle&&(c=decodeURIComponent(a.leaveTxt));var u="在线客服不在线，您可以点击此处给商家留言，并在【我的京东->消息精灵】中查看回复";a.leaveTip&&a.offlineStyle&&(u=decodeURIComponent(a.leaveTip)),$("."+n).each(function(){a.showSeller===void 0||a.showSeller?$(this).html("<b><a href='javascript:;'>"+c+"</a></b>").attr("title",i+" "+u):$(this).html("<b><a href='javascript:;'>"+c+"</a></b>").attr("title",u),$(this).click(function(){o(t,e)})})}}}function s(e){return 1==e&&a.onlineStyle?(n(a.onlineStyle),a.onlineStyle):2!=e&&3!=e||!a.offlineStyle?r(e):(n(a.offlineStyle),a.offlineStyle)}function n(e){$("."+a.iconStyle).each(function(){this.className=e})}function r(e){var t=a.iconStyle,i="";1==e?(i="."+t+"{height:28px;line-height:25px;width:91px;padding-left:30px;font-size:12px;color:white;display:inline-block;cursor:pointer; background:url(//static.360buyimg.com/im/img/im-new.gif) no-repeat 0 0;}",i+="."+t+" a {color:white;text-decoration:none;}"):2==e?i="."+t+"{height:25px;line-height:25px;width:91px;display:inline-block;background:url(//static.360buyimg.com/im/img/im-new.png) no-repeat -101px -35px}":3==e&&(i="."+t+"{height:25px;line-height:25px;width:91px;display:inline-block;cursor:pointer;background:url(//static.360buyimg.com/im/img/im-new.png) no-repeat -101px -35px}");var s=document.createElement("style");s.type="text/css",s.media="screen";try{s.appendChild(document.createTextNode(i))}catch(n){s.styleSheet.cssText=i}return document.documentElement.firstChild.appendChild(s),t}function o(e,t){var i="chat.jd.com",s="";t.chatDomain&&(i=t.chatDomain),a.shopId||t.shopId&&t.shopId>0?s=a.shopId?"shopId="+a.shopId:"shopId="+t.shopId:a.brandName||t.brandName&&"null"!=t.brandName&&""!=t.brandName?a.brandName?(s="brandName="+encodeURIComponent(encodeURIComponent(a.brandName)),a.rank3&&(s=s+"&classify="+a.rank3)):(s="brandName="+encodeURIComponent(encodeURIComponent(t.brandName)),t.rank3&&(s=s+"&classify="+t.rank3)):a.pid?s="pid="+a.pid:a.virtualId&&(s="groupId="+a.virtualId),a.from&&(s=s+"&"+a.from);var n="//"+i+"/index.action?"+s+"&code="+e;open(n)}var a=null,l="chat1.jd.com";this.show=function(e){a=e,null!=a&&t()}}var JDIM=new jdim();